(this.webpackJsonpwebmd=this.webpackJsonpwebmd||[]).push([[0],{155:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAaElEQVR4Ac3BQQrCQAAEsIz///MobGG7bZUiHkz8laKoe+olplrFtRriJVa1ilUNsYlrNcVQQ+zEe3UWB/FZTXEh3quzOIhrNcVQQ+zEWU2xqiE2D6ua4iwOHqa6J6hNTDXFl+q++oUnXWYXCDnmtMUAAAAASUVORK5CYII="},282:function(e,A,t){e.exports=t.p+"static/media/record-complete-notification-icon.f6ae1070.png"},286:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAACXBIWXMAAAsSAAALEgHS3X78AAAQR0lEQVRYCQE8EMPvAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAP8AAAAAAP8AAAIAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA//8AAAAB/wAAAgAAAAAAAAAAAQD/AP8AAAAAAAAAAAAAAP8AAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAAAAEAAAAAAAAAAP8AAP8AAAAAAQAAAP8AAAAB/wAAAAAAAAEAAAAAAAAAAAAA//8AAAAAAAABAAAA/wD//wEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAQIAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAA/wAAAAAA/wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAQD/AAAAAAD/AAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAABAP//AAAAAAAAAAAAAAEBAAABAAAAAAAAAAAAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAP8AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQL/AAD/AAAAAQAAAP8AAAAAAAAA/wAAAP8AAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAA/wAAAP8AAAAAAAAAAAAAAgEAAAH/AAD/AAAAAQAAAAAAAAABAAAAAf8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAA/wEAAAH/AAD/AAAAAP8AAP//AAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgAA//8AAAABAAAA/wAAAAAAAAD/AAAA/wAAAAAAAAAAAAD/AAAA/wAAAP8AAAAAAP//AAD//wAAAAAAAAAAAAACAAABAQAA//8AAAABAAAAAAAAAAEAAAABAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAD/AAABAQAA//8AAAAAAAD//wAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAEAAAAA/wAA/wEAAAEAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAEAAAD/AAAAAAAAAACAAAAAAAAAAH8AAAAAAAAAAQAAAAAAAAAA/wAAAAAAAACBAAAAAAAAAIAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAD/AAD/AQAAAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAD/AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAQIAAAAAAAAA/wAAAAABAAABAAAAAP8AAP//AAD/AAAAAAAAAAH/AAD/AAAAAP8AAAD/AAD//wAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAD/AAAAAQEAAAEAAAAAAAAAAP8AAP8BAAABAAAAAAAAAAABAAABAAAAAAAAAAAAAAAAAAAAAAAAAACBAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAACAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAQAAAAAAAD//wAAAQEAAAABAAAAAAAAAP8AAAAAAAAAAQEAAAEAAAD/AAAAAQEAAAAAAAD/AAAAAAAAAAEAAAAAAAAAAAEAAAAAAIAAAAAAAAAAfwAAAAAAAAABAAAAAAD//wAAAAAAAIGBAAAAAAAAgAEAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAP//AAABAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAD/AAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAQIAAAAAAAAA/wAAAAAAAAEBAAAAAAAA//8AAP//AAAAAAAAAAEAAP//AAAAAAAA/wAAAP//AAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAD/AAAAAQAAAQEAAAAAAAAAAAAA//8AAAEBAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIEAAAAAAAAAgAAAAAAAAAAAAAAAAAABAQAAAAAAAICAAAAAAAAAf38AAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAEAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO4NtYBuc2+1AAAAAElFTkSuQmCC"},296:function(e,A,t){e.exports=t.p+"static/media/chrome-icon.f3b6c54c.svg"},299:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiUlEQVR4Ae3BSQ7CUAxEwde+/50bFkgQyGD/DBZSqrjtZMDsIMaZKTFAjDHzRJGoM+tEgagxOSJJ5JkakSByzBixQWwz+4gVYp05hlgglpljiRlinjmH+CJ+mXOJD2LKXEO8iDdzLfEUNBN5pk5sCJoFzYJmQbOgWdAsaBY0C5oFzUSNyRO3f/AAz+gRJE12Ia8AAAAASUVORK5CYII="},300:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiElEQVR4Ae3BSQ7CQBAEwcz+/58LDkhsxp4xSwtBBD9P5oRxMkDGhXmyoWhWNCuaFc2KZkWzolnRrGhWNJOz8FlyVDSTa+Ez5ETuhfeSC7IsvIfckMfCa8kCWRdeQx6QbeE5skLGhH1kg4wLc2SAzAljZJDMC+tkguwTlskk2S9ckwYBwt83OwASZhEklsYbbQAAAABJRU5ErkJggg=="},304:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAzUlEQVR4AY3BgXHCMBAAwXuHQugEdfanzkRlH3nGgMfjEO8GF6nFjhpMCxeoxZSZrFprTMW0cFFm0nsnU8YYvNy4QGWVKRGgvC38R4uptUYEqKi8BN9okQm9g3IQTMFftMiECHaCg4UzWmRCBCib4MTCkRaZEAEKmXwT7GmRCb2D8laFvfOiBptgo1ZrjTYGKFPwUROriGAKNjd2Wmtsgh2V1fP55OjGpBYfwYneOypnCij+V0Bx8AMIBF+opXK/3xljCHQ2Cxc9Hg/O/AKFdlY5+3GtSAAAAABJRU5ErkJggg=="},305:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAfUlEQVR4Aa3BUQ6CMBRFwXOb7vulKz/CR4Ni1RCc4a6wJr+FTeedbFQ+ScLUeOWGKxoH2SRhSgZTMljpPFG5qrOQDKZkMCUDLZ41FrTYaaHFTgstzho3dU6SwZQMpmSgxVnjRIudFlrstNBipXFTY0GLSYtvGjeFg1wT/uEBKpc1Cx/u8CoAAAAASUVORK5CYII="},306:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAt0lEQVR4Ab3Bi1HbYBAGwD2RQlwKVMbnzu6v7IIkZ4CEhzOZya5/Vf7OBHEoLx7cb4JnFJrgurnPJAhXPCNOm+/NjFfhijhtvjYzDo+P7Zc4lBebz82Mw1qtu+0Su3JTPjYzDmu17kYkduWN8qeZcVirdTcisSu/Ke/NjMNarbsRiV35QHk1Mw5rte5GJHblE5vTuFmrdTcisStfeHBKwtMTl8sFkdiVb/zwRkISN+UO5TTeK//LT0efTfwPZVIpAAAAAElFTkSuQmCC"},307:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA3klEQVR4Ae3BwU3EUBBEweeV8+Jn1u3MeiL7eARIPoCFVsLLwVXcbrfb7fZqCwe2Jxeyvax8sj3HGFwlCbv5YGd7jjG4ShK+rLanJK6ybRtHK5+qildY+YUkPGuMwZmVg7cxaJXQktBs8yzbtDEG33nwYisHlXAkiWabZ0miVRXfWTlRVbQ5J8+qKs6s/EJV8VcenEhCS0JLQktCS0JLQktCS0JLQkvCTx6ckESTRJNEk0STRJNEk0STRJNEk8RPFttTElXFFZLQbLNbVnbbtnEl2+wWdgsfJtdauP0X7xi2ahnkEPOyAAAAAElFTkSuQmCC"},308:function(e,A){e.exports="data:image/png;base64,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"},312:function(e,A){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACcklEQVR4Ae3BgW1bRxBF0bs0C1lXss+VWJ3ssBO6kzedWJVM/kIk8kVQMmUlCAL4HP74rzUeFBHFHRHReF9xX2Nz5B0RUVzMGVxlmquIKC4iovFBR+6IiOIi5mSZBPdIYqd40Xit8VpxceRGRFTM4EXxEbZZJBXQeEBjJyIqZvBacVU0lkyzSOKzjlxEREnCaTTEo6qKq9YaVcVea42qYq+1RlXRWqNxEREVc+JMFg3xt2IpGkumWSTxWQc2EVExJ4vGYHGaR1QVVUVVsVQVVcVeVVFV7FUVS2MTESWJRWOwOJNFQ7woisaSaRZJfFaLiJLELY2BM1k0xBKnYC8iqCquWmtUFY9qrdEioiRxj8bAmSy2iQj+aUfe4Uw0BnE6ERFsGq9VRBARXNnmliQ2jTsO/IIzeZRtPurAxjaLbRbbLLZ5hG1s8zsObCRhG0nYRhK2kYRt/k1HNraRhG0kYRtJ2GbOSWYSEUREsRMRSOIzjmwkYRtJ2EYStplzkpmMMVgigr2YE2fyGV9sn3rvIQnbSMI2c04ykzEGmcnSe6f3zvfvT7QWnHvn3DtPz8+8RRKbxhsOXNhGEraZc5KZjDHITPbGEIuGcCaLxuB3HdhERGNjmzknmckYg8zkVqa5R2NwSxKbxjsO7Mw5yUzGGGQm94whrjSEM7nSGHzUgYuIaKfTiTEGmclbMs17NAaLJDaNX/jCju1Tay1677xlDLEEcALO/YzzG+feuTp//cqm8YAv3LB96r3Hz58/6b1z6/n5id7PLCdePD0/0X/8wN++wenEpvGgxjsiothI4moMcdXYNPYaH9R4TPG2xh//Z38BPq9JPdh7I1oAAAAASUVORK5CYII="},335:function(e,A,t){e.exports=t(576)},359:function(e,A){},361:function(e,A){},392:function(e,A){},393:function(e,A){},399:function(e,A){},527:function(e,A){},529:function(e,A){},559:function(e,A,t){},560:function(e,A,t){},575:function(e,A,t){e.exports=function(){return new Worker(t.p+"e40438b6922e6e1880d0.worker.js")}},576:function(e,A,t){"use strict";t.r(A);var a=t(0),n=t.n(a),l=t(18),r=t.n(l),i=t(22);const o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,A){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;null!=t&&(t.onstatechange=()=>{console.log("state change",t.state),"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),A&&A.onUpdate&&A.onUpdate(e)):(console.log("Content is cached for offline use."),A&&A.onSuccess&&A.onSuccess(e)))})},e.update()}).catch(e=>{console.error("Error during service worker registration:",e)})}var s=t(34),m=t(20),d=t(280);function u(e){return new Promise(A=>{setTimeout(A,e)})}async function p(e,A){let t=1,a=setInterval(()=>{t++,A(Math.min(100,1e3*t/e*100))},1e3);await u(e),window.clearInterval(a)}function g(e){return Object(i.d)(e,i.b)}function h(e){return`/webminidisc/${e}`}function b(e,A){localStorage.setItem(e,JSON.stringify(A))}function E(e,A){let t=localStorage.getItem(e);if(null===t)return A;try{return JSON.parse(t)}catch(a){return A}}function f(e){return e.normalize("NFD").replace(/[^\x00-\x7F]/g,"")}const v={[m.Encoding.sp]:"SP",[m.Encoding.lp2]:"LP2",[m.Encoding.lp4]:"LP4"};function w(e){let A=[];if(null!==e)for(let n of e.groups)for(let e of n.tracks){var t,a;A.push({index:e.index,title:null!==(t=e.title)&&void 0!==t?t:"Unknown Title",group:null!==(a=n.title)&&void 0!==a?a:"",encoding:v[e.encoding],duration:Object(m.formatTimeFromFrames)(e.duration,!1)})}return A.sort((e,A)=>e.index-A.index),A}function C(e,A,t){const a=t.value;return t.value=async function(...e){const A=this.mutex,t=await A.acquire();try{return await a.apply(this,e)}finally{t()}},t}function k(e){return e.breakpoints.up(600+2*e.spacing(2))}function y(e){return e.breakpoints.down(600+2*e.spacing(2))}function D(e){return e.breakpoints.up(700+2*e.spacing(2))+" and (min-height: 750px)"}var x,O=t(315);const S=t(460);let B=(x=class{constructor({debug:e=!1}){if(this.netmdInterface=void 0,this.logger=void 0,this.mutex=new O.a,this.statusMonitorTimer=void 0,e){const e=(...e)=>{e&&e[0]&&e[0].method&&console.log(...e)};this.logger={debug:e,info:e,warn:e,error:e,child:()=>this.logger}}}async pair(){let e=await Object(m.openNewDevice)(navigator.usb,this.logger);return null!==e&&(this.netmdInterface=e,!0)}async connect(){let e=await Object(m.openPairedDevice)(navigator.usb,this.logger);return null!==e&&(this.netmdInterface=e,!0)}async listContent(){return await Object(m.listContent)(this.netmdInterface)}async getDeviceStatus(){return await Object(m.getDeviceStatus)(this.netmdInterface)}async getDeviceName(){return await this.netmdInterface.netMd.getDeviceName()}async finalize(){await this.netmdInterface.netMd.finalize()}async renameTrack(e,A){A=f(A),await this.netmdInterface.cacheTOC(),await this.netmdInterface.setTrackTitle(e,A),await this.netmdInterface.syncTOC()}async renameDisc(e){const A=await this.netmdInterface.getDiscTitle(),t=await this.netmdInterface._getDiscTitle(),a=t.indexOf("//")>=0,n=t.startsWith("0;");if(e===A)return;let l;l=a?n?t.replace(/^0;.*?\/\//,""!==e?`0;${e}//`:""):`0;${e}//${t}`:e,await this.netmdInterface.cacheTOC(),await this.netmdInterface.setDiscTitle(l),await this.netmdInterface.syncTOC()}async deleteTrack(e){await this.netmdInterface.eraseTrack(e),await u(100)}async wipeDisc(){await this.netmdInterface.eraseDisc()}async moveTrack(e,A){await this.netmdInterface.moveTrack(e,A)}async upload(e,A,t,a){let n=A.byteLength,l=0,r=0;function i(){a({written:l,encrypted:r,total:n})}let o=new S,c=Object(d.makeGetAsyncPacketIteratorOnWorkerThread)(o,({encryptedBytes:e})=>{r=e,i()});e=f(e);let s=new m.MDTrack(e,t,A,524288,c);await Object(m.download)(this.netmdInterface,s,({writtenBytes:e})=>{l=e,i()}),o.terminate()}async play(){await this.netmdInterface.play()}async pause(){await this.netmdInterface.pause()}async stop(){await this.netmdInterface.stop()}async next(){await this.netmdInterface.nextTrack()}async prev(){await this.netmdInterface.previousTrack()}async gotoTrack(e){await this.netmdInterface.gotoTrack(e)}async getPosition(){return await this.netmdInterface.getPosition()}},Object(s.a)(x.prototype,"listContent",[C],Object.getOwnPropertyDescriptor(x.prototype,"listContent"),x.prototype),Object(s.a)(x.prototype,"getDeviceStatus",[C],Object.getOwnPropertyDescriptor(x.prototype,"getDeviceStatus"),x.prototype),Object(s.a)(x.prototype,"getDeviceName",[C],Object.getOwnPropertyDescriptor(x.prototype,"getDeviceName"),x.prototype),Object(s.a)(x.prototype,"finalize",[C],Object.getOwnPropertyDescriptor(x.prototype,"finalize"),x.prototype),Object(s.a)(x.prototype,"renameTrack",[C],Object.getOwnPropertyDescriptor(x.prototype,"renameTrack"),x.prototype),Object(s.a)(x.prototype,"renameDisc",[C],Object.getOwnPropertyDescriptor(x.prototype,"renameDisc"),x.prototype),Object(s.a)(x.prototype,"deleteTrack",[C],Object.getOwnPropertyDescriptor(x.prototype,"deleteTrack"),x.prototype),Object(s.a)(x.prototype,"wipeDisc",[C],Object.getOwnPropertyDescriptor(x.prototype,"wipeDisc"),x.prototype),Object(s.a)(x.prototype,"moveTrack",[C],Object.getOwnPropertyDescriptor(x.prototype,"moveTrack"),x.prototype),Object(s.a)(x.prototype,"play",[C],Object.getOwnPropertyDescriptor(x.prototype,"play"),x.prototype),Object(s.a)(x.prototype,"pause",[C],Object.getOwnPropertyDescriptor(x.prototype,"pause"),x.prototype),Object(s.a)(x.prototype,"stop",[C],Object.getOwnPropertyDescriptor(x.prototype,"stop"),x.prototype),Object(s.a)(x.prototype,"next",[C],Object.getOwnPropertyDescriptor(x.prototype,"next"),x.prototype),Object(s.a)(x.prototype,"prev",[C],Object.getOwnPropertyDescriptor(x.prototype,"prev"),x.prototype),Object(s.a)(x.prototype,"gotoTrack",[C],Object.getOwnPropertyDescriptor(x.prototype,"gotoTrack"),x.prototype),Object(s.a)(x.prototype,"getPosition",[C],Object.getOwnPropertyDescriptor(x.prototype,"getPosition"),x.prototype),x);var I={},j=t(54),N=t(26),P=t(19);const R=Object(N.b)({name:"uploadDialog",initialState:{visible:!1,cancelled:!1,writtenProgress:0,encryptedProgress:0,totalProgress:1,trackTotal:1,trackConverting:0,trackCurrent:0,titleCurrent:"",titleConverting:""},reducers:{setVisible:(e,A)=>{e.visible=A.payload},setWriteProgress:(e,A)=>{e.encryptedProgress=A.payload.encrypted,e.writtenProgress=A.payload.written,e.totalProgress=A.payload.total},setCancelUpload:(e,A)=>{e.cancelled=A.payload},setTrackProgress:(e,A)=>{e.trackTotal=A.payload.total,e.trackCurrent=A.payload.current,e.trackConverting=A.payload.converting,e.titleCurrent=A.payload.titleCurrent,e.titleConverting=A.payload.titleConverting}}}),{reducer:T,actions:M}=R;var Q=Object(P.enableBatching)(T);const F=Object(N.b)({name:"renameDialog",initialState:{visible:!1,title:"",index:-1},reducers:{setVisible:(e,A)=>{e.visible=A.payload},setCurrentName:(e,A)=>{e.title=A.payload},setIndex:(e,A)=>{e.index=A.payload}}}),{reducer:z,actions:W}=F;var L=Object(P.enableBatching)(z);const U={visible:!1,error:""},G=Object(N.b)({name:"errorDialog",initialState:U,reducers:{setVisible:(e,A)=>{e.visible=A.payload},setErrorMessage:(e,A)=>{e.error=`${A.payload}`}}}),{actions:V,reducer:H}=G;var J=Object(P.enableBatching)(H);const Y=Object(N.b)({name:"panicDialog",initialState:{visible:!1,dismissed:!1},reducers:{setVisible:(e,A)=>{e.visible=A.payload},dismiss:(e,A)=>{e.visible=!1,e.dismissed=!0}}}),{actions:K,reducer:Z}=Y;var X=Object(P.enableBatching)(Z);const q={visible:!1,format:E("uploadFormat","LP2"),titleFormat:E("trackTitleFormat","filename")},$=Object(N.b)({name:"convertDialog",initialState:q,reducers:{setVisible:(e,A)=>{e.visible=A.payload},setFormat:(e,A)=>{e.format=A.payload,b("uploadFormat",e.format)},setTitleFormat:(e,A)=>{e.titleFormat=A.payload,b("trackTitleFormat",e.titleFormat)}}}),{actions:_,reducer:ee}=$;var Ae=Object(P.enableBatching)(ee);const te=Object(N.b)({name:"dumpDialog",initialState:{visible:!1,inputDeviceId:""},reducers:{setVisible:(e,A)=>{e.visible=A.payload},setInputDeviceId:(e,A)=>{e.inputDeviceId=A.payload}}}),{reducer:ae,actions:ne}=te;var le=Object(P.enableBatching)(ae);const re=Object(N.b)({name:"recordDialog",initialState:{visible:!1,trackTotal:1,trackDone:0,trackCurrent:0,titleCurrent:""},reducers:{setVisible:(e,A)=>{e.visible=A.payload},setProgress:(e,A)=>{e.trackTotal=A.payload.trackTotal,e.trackDone=A.payload.trackDone,e.trackCurrent=A.payload.trackCurrent,e.titleCurrent=A.payload.titleCurrent}}}),{reducer:ie,actions:oe}=re;var ce=Object(P.enableBatching)(ie);const se=()=>({mainView:"WELCOME",loading:!1,pairingFailed:!1,pairingMessage:"",browserSupported:!0,darkMode:E("darkMode",!1),vintageMode:E("vintageMode",!1),aboutDialogVisible:!1,notifyWhenFinished:E("notifyWhenFinished",!1),hasNotificationSupport:!0}),me=se(),de=Object(N.b)({name:"app",initialState:me,reducers:{setMainView:(e,A)=>{e.mainView=A.payload},setLoading:(e,A)=>{e.loading=A.payload},setPairingFailed:(e,A)=>{e.pairingFailed=A.payload},setPairingMessage:(e,A)=>{e.pairingMessage=A.payload},setBrowserSupported:(e,A)=>{e.browserSupported=A.payload},setDarkMode:(e,A)=>{e.darkMode=A.payload,b("darkMode",e.darkMode)},setNotifyWhenFinished:(e,A)=>{e.notifyWhenFinished=A.payload,b("notifyWhenFinished",A.payload)},setNotificationSupport:(e,A)=>{e.hasNotificationSupport=A.payload},setVintageMode:(e,A)=>{e.vintageMode=A.payload,b("vintageMode",A.payload)},showAboutDialog:(e,A)=>{e.aboutDialogVisible=A.payload}}}),{reducer:ue,actions:pe}=de;var ge=Object(P.enableBatching)(ue);const he=Object(N.b)({name:"main",initialState:{disc:null,deviceName:"",deviceStatus:null},reducers:{setDisc:(e,A)=>{e.disc=A.payload},setDeviceName:(e,A)=>{e.deviceName=A.payload},setDeviceStatus:(e,A)=>{e.deviceStatus=A.payload}}}),{reducer:be,actions:Ee}=he;var fe=Object(P.enableBatching)(be);let ve=Object(j.c)({renameDialog:L,uploadDialog:Q,errorDialog:J,panicDialog:X,convertDialog:Ae,dumpDialog:le,recordDialog:ce,appState:ge,main:fe});const we=pe.setMainView.toString(),Ce=Object(N.a)({reducer:function(...e){const[A,t]=e;return t.type===we&&"WELCOME"===t.payload?{...ke,appState:se()}:ve(...e)},middleware:[e=>e=>async A=>{try{await e(A)}catch(t){console.error(t),e(K.setVisible(!0))}},...Object(N.c)()]}),ke=Object.freeze(Ce.getState());var ye=t(645),De=t(581),xe=t(646),Oe=t(622),Se=t(314),Be=t(638),Ie=t(281),je=t(282),Ne=t.n(je);function Pe(e,A){return async function(t,a){switch(e){case"play":await I.netmdService.play();break;case"stop":await I.netmdService.stop();break;case"next":await I.netmdService.next();break;case"prev":await I.netmdService.prev();break;case"goto":A&&"number"===typeof A&&A>=0&&await I.netmdService.gotoTrack(A)}await u(500);try{let e=await I.netmdService.getDeviceStatus();t(Ee.setDeviceStatus(e))}catch(n){console.log("control: Cannot get device status")}}}function Re(){return async function(e,A){e(pe.setPairingFailed(!1)),await I.audioExportService.init();try{if(await I.netmdService.connect())return void e(pe.setMainView("MAIN"))}catch(t){console.error(t)}try{if(await I.netmdService.pair())return void e(pe.setMainView("MAIN"));e(Object(P.batchActions)([pe.setPairingMessage("Connection Failed"),pe.setPairingFailed(!0)]))}catch(t){console.error(t);let A=t.message;e(Object(P.batchActions)([pe.setPairingMessage(A),pe.setPairingFailed(!0)]))}}}function Te(){return async function(e){e(pe.setLoading(!0));let A=await I.netmdService.listContent(),t=await I.netmdService.getDeviceName(),a=null;try{a=await I.netmdService.getDeviceStatus()}catch(n){console.log("listContent: Cannot get device status")}e(Object(P.batchActions)([Ee.setDisc(A),Ee.setDeviceName(t),Ee.setDeviceStatus(a),pe.setLoading(!1)]))}}function Me(e){return async function(A,t){if("granted"!==Notification.permission){if(!window.confirm("Enable Notification on recording completed?"))return;if("granted"!==await(function(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}()?Notification.requestPermission():new Promise(e=>Notification.requestPermission(e))))return A(pe.setNotificationSupport(!1)),void A(pe.setNotifyWhenFinished(!1))}A(pe.setNotifyWhenFinished(e))}}const Qe={SP:m.Wireformat.pcm,LP2:m.Wireformat.lp2,LP105:m.Wireformat.l105kbps,LP4:m.Wireformat.lp4};async function Fe(e,A){var t,a,n;const l=await e.arrayBuffer(),r=new Blob([new Uint8Array(l)]);let i=await Ie.parseBlob(r);const o=null!==(t=i.common.title)&&void 0!==t?t:"Unknown Title",c=null!==(a=i.common.artist)&&void 0!==a?a:"Unknown Artist",s=null!==(n=i.common.album)&&void 0!==n?n:"Unknown Album";switch(A){case"title":return o;case"artist-title":return`${c} - ${o}`;case"album-title":return`${s} - ${o}`;case"artist-album-title":return`${c} - ${s} - ${o}`;case"filename":{let A=e.name;const t=A.lastIndexOf(".");return t>0&&(A=A.substring(0,t)),A}}}function ze(e,A,t){return async function(a,n){const{audioExportService:l,netmdService:r}=I,i=Qe[A];await(null===r||void 0===r?void 0:r.stop()),a(Object(P.batchActions)([M.setVisible(!0),M.setCancelUpload(!1)]));const o=({written:e,encrypted:A,total:t})=>{a(M.setWriteProgress({written:e,encrypted:A,total:t}))},c=()=>n().uploadDialog.cancelled;let s={current:0,converting:0,total:e.length,titleCurrent:"",titleConverting:""};const d=()=>{a(M.setTrackProgress(s))};let u=n().main.disc,p=u?1700-Object(m.getTracks)(u).map(e=>e.title||"").reduce((e,A)=>e+A.length,0):-1;let g;p=Math.floor(p/e.length);let h="",b=1;for await(let m of async function*(e){let t=[],a=0;!function n(){if(a===e.length||c())return s.converting=a,s.titleConverting="",void d();let r=e[a];s.converting=a,s.titleConverting=r.name,d(),a++,t.push(new Promise(async(e,t)=>{let a;try{await l.prepare(r),a=await l.export({format:A}),n(),e({file:r,data:a})}catch(i){g=i,h=`${r.name}: Unsupported or unrecognized format`,t(i)}}))}();let n=0;for(;n<t.length;)yield await t[n],delete t[n],n++}(e)){if(c())break;const{file:e,data:A}=m;let a=e.name;try{a=await Fe(e,t)}catch(f){console.error(f)}p>-1&&(a=a.substring(0,p)),s.current=b++,s.titleCurrent=a,d(),o({written:0,encrypted:0,total:100});try{await(null===r||void 0===r?void 0:r.upload(a,A,i,o))}catch(f){g=f,h=`${e.name}: Error uploading to device. There might not be enough space left.`;break}}let E=[M.setVisible(!1)];g&&(console.error(g),E=E.concat([V.setVisible(!0),V.setErrorMessage(h)])),a(Object(P.batchActions)(E)),function(){const{notifyWhenFinished:e,hasNotificationSupport:A}=n().appState;A&&e&&(new Notification("MiniDisc recording completed",{icon:Ne.a}).onclick=function(){window.focus(),this.close()})}(),Te()(a)}}var We=t(621),Le=t(73),Ue=t(629),Ge=t(630),Ve=t(652),He=t(619),Je=t(613),Ye=t(620),Ke=t(617),Ze=t(618),Xe=t(616),qe=t(612),$e=t(6),_e=t(2);const eA=_e.e.div`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
`,AA=Object(_e.e)($e.v)`
    width: 80%;
    left: 10%;
    top: 20%;
`,tA=_e.e.div`
    display: flex;
    justify-content: flex-end;
    padding-top: 16px;
    width: 100%;
`,aA=Object(_e.e)($e.w)`
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
`,nA=Object(_e.e)($e.c)`
    margin-left: 16px;
    min-width: 90px;
`,lA=Object(_e.e)($e.r)`
    cursor: default;
    &:hover {
        color: ${e=>e.theme.canvasText};
        background-color: initial;
    }
`,rA=_e.e.span`
    display: inline-block;
    width: 16px;
    height: 16px;
    margin-left: -1px;
    margin-top: -1px;
    transform: rotateZ(45deg);
    position: relative;

    &:before {
        content: '';
        position: absolute;
        height: 100%;
        width: 3px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #0a0a0a;
    }

    &:after {
        content: '';
        position: absolute;
        height: 3px;
        width: 100%;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        background-color: #0a0a0a;
    }
`,iA=_e.e.button`
    width: 60px;
    height: 60px;
    position: absolute;
    bottom: 40px;
    right: 24px;
    z-index: 1;
    border-radius: 50%;
    background: rgb(185, 106, 201);
    border-width: 4px;
    border-style: solid;
    border-color: rgb(233, 128, 252) rgb(111, 45, 189) rgb(111, 45, 189) rgb(233, 128, 252);
    box-shadow: rgb(0 0 0 / 45%) 4px 4px 10px 0px;

    &:after {
        content: '';
        display: inline-block;
        width: 100%;
        height: 100%;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAADKgAAAyoBEJdYGAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHWSURBVHic7d3BbdYwGIDhz1wYAakXNmOGdhKY4d+MC1JH4BQurcQ1EmmE3+cZwLbkV04OjrKO45idrLWeZ+b7RcO/HMfx46Kxb/Hp7gVwLwHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAuB0DePpPx77F2umXMWutzzPzc2a+XDTF68x8PY7j90Xjf7g1M893L+IfeZqZb3Pd5r97nZnHzPy6eJ4PsWZmnyOA03Z8B+AEAcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAohzLfy8va6F+zDklO0+DNnqEfC2MY8Lp3jstPkzmwXw5sqjeYtj/287BsAJAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxfwAw2y4BcmRzJgAAAABJRU5ErkJggg==');
        background-size: 30px;
        background-repeat: no-repeat;
        filter: drop-shadow(rgb(233, 128, 252) 1px 1px 0px) drop-shadow(rgb(111, 45, 189) -1px -1px 0px);
        background-position: center center;
    }

    &:active {
        border-width: 4px;
        border-style: solid;
        border-color: rgb(111, 45, 189) rgb(233, 128, 252) rgb(233, 128, 252) rgb(111, 45, 189);
        box-shadow: rgb(0 0 0 / 55%) 3px 3px 5px 0px;
    }
`,oA=e=>e.visible?n.a.createElement(eA,null,n.a.createElement(AA,null,n.a.createElement($e.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("span",{style:{flex:"1 1 auto"}},"About Web MiniDisc"),n.a.createElement($e.c,{onClick:e.handleClose},n.a.createElement(rA,null))),n.a.createElement(aA,null,"Web MiniDisc uses",n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://www.ffmpeg.org/",target:"_blank"},"FFmpeg")," ","and"," ",n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://github.com/ffmpegjs/FFmpeg",target:"_blank"},"ffmpegjs"),", to read your audio files (wav, mp3, ogg, mp4, etc...)."),n.a.createElement("li",null,n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://github.com/dcherednik/atracdenc/",target:"_blank"},"Atracdenc"),", to support atrac3 encoding (lp2, lp4 audio formats)."),n.a.createElement("li",null,n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://emscripten.org/",target:"_blank"},"Emscripten"),", to run both FFmpeg and Atracdenc in the browser."),n.a.createElement("li",null,n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/netmd-js",target:"_blank"},"netmd-js"),", to send commands to NetMD devices using Javascript."),n.a.createElement("li",null,n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://github.com/glaubitz/linux-minidisc",target:"_blank"},"linux-minidisc"),", to make the netmd-js project possible."),n.a.createElement("li",null,n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://react95.io/",target:"_blank"},"react85"),", to build the vintage user interface."),n.a.createElement("li",null,n.a.createElement($e.a,{rel:"noopener noreferrer",href:"https://material-ui.com/",target:"_blank"},"material-ui"),", to build the user interface.")),n.a.createElement(tA,null,n.a.createElement(nA,{onClick:e.handleClose},"OK"))))):null,cA=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),sA=e=>{const A=Object(i.c)();let t=g(e=>e.appState.aboutDialogVisible);const a=()=>{A(pe.showAboutDialog(!1))};if(g(e=>e.appState.vintageMode)){const e={visible:t,handleClose:a};return n.a.createElement(oA,e)}return n.a.createElement(Je.a,{open:t,maxWidth:"sm",fullWidth:!0,TransitionComponent:cA,"aria-labelledby":"about-dialog-slide-title"},n.a.createElement(Xe.a,{id:"about-dialog-slide-title"},"About Web MiniDisc"),n.a.createElement(Ke.a,null,n.a.createElement(Ze.a,null,"Web MiniDisc uses"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://www.ffmpeg.org/",target:"_blank"},"FFmpeg")," ","and"," ",n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://github.com/ffmpegjs/FFmpeg",target:"_blank"},"ffmpegjs"),", to read your audio files (wav, mp3, ogg, mp4, etc...)."),n.a.createElement("li",null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://github.com/dcherednik/atracdenc/",target:"_blank"},"Atracdenc"),", to support atrac3 encoding (lp2, lp4 audio formats)."),n.a.createElement("li",null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://emscripten.org/",target:"_blank"},"Emscripten"),", to run both FFmpeg and Atracdenc in the browser."),n.a.createElement("li",null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/netmd-js",target:"_blank"},"netmd-js"),", to send commands to NetMD devices using Javascript."),n.a.createElement("li",null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://github.com/glaubitz/linux-minidisc",target:"_blank"},"linux-minidisc"),", to make the netmd-js project possible."),n.a.createElement("li",null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://react95.io/",target:"_blank"},"react95"),", to build the vintage user interface."),n.a.createElement("li",null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://material-ui.com/",target:"_blank"},"material-ui"),", to build the user interface.")),n.a.createElement(Ze.a,null,"Attribution"),n.a.createElement("ul",null,n.a.createElement("li",null,"MiniDisc logo from"," ",n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/MiniDisc",target:"_blank"},"https://en.wikipedia.org/wiki/MiniDisc")),n.a.createElement("li",null,"MiniDisc icon from"," ",n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://www.deviantart.com/blinkybill/art/Sony-MiniDisc-Plastic-Icon-473812540",target:"_blank"},"http://fav.me/d7u3g3g")))),n.a.createElement(Ye.a,null,n.a.createElement(We.a,{onClick:a},"Close")))};var mA=t(583),dA=t(316),uA=t(623),pA=t(295),gA=t.n(pA),hA=t(624),bA=t(625),EA=t(287),fA=t.n(EA),vA=t(153),wA=t.n(vA),CA=t(294),kA=t.n(CA),yA=t(288),DA=t.n(yA),xA=t(289),OA=t.n(xA),SA=t(292),BA=t.n(SA),IA=t(291),jA=t.n(IA),NA=t(290),PA=t.n(NA),RA=t(286),TA=t.n(RA),MA=t(293),QA=t.n(MA);const FA=e=>{const A=[];return"MAIN"===e.mainView&&(A.push(n.a.createElement($e.i,{key:"update",onClick:e.handleRefresh},"Reload TOC")),A.push(n.a.createElement($e.i,{key:"title",onClick:e.handleRenameDisc},"Rename Disc")),A.push(n.a.createElement($e.i,{key:"wipe",onClick:e.handleWipeDisc},"Wipe Disc")),A.push(n.a.createElement($e.i,{key:"vintage",onClick:e.handleVintageMode},n.a.createElement($e.d,{checked:!0,name:"vintageMode",variant:"menu",value:"vintageMode",label:"Retro Mode (beta)",defaultChecked:!0}))),A.push(n.a.createElement($e.e,{key:"d1"})),A.push(n.a.createElement($e.i,{key:"exit",onClick:e.handleExit},"Exit")),A.push(n.a.createElement($e.e,{key:"d2"}))),A.push(n.a.createElement($e.i,{key:"about",onClick:e.handleShowAbout},"About...")),A.push(n.a.createElement($e.i,{key:"menu-gh"},n.a.createElement("a",{rel:"noopener noreferrer",href:"https://github.com/cybercase/webminidisc",target:"_blank"},"Fork me on GitHub"))),n.a.createElement($e.h,{style:{position:"absolute",left:"0",top:"100%",zIndex:"9999"},onClick:e.onClick},A)},zA=Object(Oe.a)(e=>({listItemIcon:{minWidth:e.spacing(5)}})),WA=function(e){const A=zA(),t=Object(i.c)();let{mainView:l,darkMode:r,vintageMode:o}=g(e=>e.appState),c=g(e=>{var A,t;return null!==(A=null===(t=e.main.disc)||void 0===t?void 0:t.title)&&void 0!==A?A:""});const s=n.a.useRef(null),m=n.a.useRef(null),[d,u]=n.a.useState(null),p=Boolean(d),h=Object(a.useCallback)(e=>{u(e.currentTarget)},[u]),b=Object(a.useCallback)(()=>{t(pe.setDarkMode(!r))},[t,r]),E=Object(a.useCallback)(()=>{t(pe.setVintageMode(!o))},[t,o]),f=Object(a.useCallback)(()=>{u(null)},[u]),v=Object(a.useCallback)(()=>{t((async function(e){if(!window.confirm("Proceed with Wipe Disc? This operation cannot be undone."))return;const{netmdService:A}=I;e(pe.setLoading(!0)),await A.wipeDisc(),Te()(e)})),f()},[t,f]),w=Object(a.useCallback)(()=>{t(Te()),f()},[t,f]),C=Object(a.useCallback)(()=>{t(Object(P.batchActions)([W.setVisible(!0),W.setCurrentName(c),W.setIndex(-1)])),f()},[t,f,c]),k=Object(a.useCallback)(()=>{t(pe.setMainView("WELCOME")),f()},[t,f]),y=Object(a.useCallback)(()=>{t(pe.showAboutDialog(!0)),f()},[t,f]),D=Object(a.useCallback)(e=>{var A;(e.stopPropagation(),e.target!==s.current)&&(null===(A=s.current)||void 0===A||A.click());f()},[f]),x=Object(a.useCallback)(e=>{var A;(e.stopPropagation(),e.target!==m.current)&&(null===(A=m.current)||void 0===A||A.click());f()},[f]),O=[];if("MAIN"===l&&(O.push(n.a.createElement(uA.a,{key:"update",onClick:w},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement(fA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,"Reload TOC"))),O.push(n.a.createElement(uA.a,{key:"title",onClick:C},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement(wA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,"Rename Disc"))),O.push(n.a.createElement(uA.a,{key:"wipe",onClick:v},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement(DA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,"Wipe Disc"))),O.push(n.a.createElement(uA.a,{key:"exit",onClick:k},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement(OA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,"Exit")))),O.push(n.a.createElement(uA.a,{key:"darkMode",onClick:b},n.a.createElement(hA.a,{className:A.listItemIcon},r?n.a.createElement(PA.a,{fontSize:"small"}):n.a.createElement(jA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,"Dark Mode"))),"MAIN"===l&&O.push(n.a.createElement(uA.a,{key:"vintageMode",onClick:E},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement("img",{alt:"Windows 95",src:TA.a,width:"24px",height:"24px"})),n.a.createElement(bA.a,null,"Retro Mode (beta)"))),O.push(n.a.createElement(uA.a,{key:"about",onClick:y},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement(BA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,"About"))),O.push(n.a.createElement(uA.a,{key:"support",onClick:x},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement(QA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ",target:"_blank",ref:m,onClick:x},"Support and FAQ")))),O.push(n.a.createElement(uA.a,{key:"github",onClick:D},n.a.createElement(hA.a,{className:A.listItemIcon},n.a.createElement(kA.a,{fontSize:"small"})),n.a.createElement(bA.a,null,n.a.createElement(He.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/webminidisc",target:"_blank",ref:s,onClick:D},"Fork me on GitHub")))),o){const A={mainView:l,onClick:e.onClick,handleWipeDisc:v,handleRefresh:w,handleRenameDisc:C,handleExit:k,handleShowAbout:y,handleVintageMode:E};return n.a.createElement(FA,A)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(mA.a,{"aria-label":"actions","aria-controls":"actions-menu","aria-haspopup":"true",onClick:h},n.a.createElement(gA.a,null)),n.a.createElement(dA.a,{id:"actions-menu",anchorEl:d,keepMounted:!0,open:p,onClose:f},O))};var LA=t(296),UA=t.n(LA);const GA=Object(Oe.a)(e=>({pairingMessage:{color:"red",marginTop:e.spacing(1)},windowContent:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}})),VA=e=>{let{dispatch:A,pairingFailed:t,pairingMessage:a}=e;const l=GA();return n.a.createElement(n.a.Fragment,null,n.a.createElement($e.w,{className:l.windowContent},n.a.createElement("p",{style:{paddingBottom:8}},"Press the button to connect to a NetMD device"),n.a.createElement($e.c,{style:{minWidth:90},onClick:()=>A(Re())},"Connect"),n.a.createElement("p",{style:{visibility:t?"visible":"hidden"},className:l.pairingMessage},a)),n.a.createElement(sA,null))};var HA=t(297),JA=t.n(HA);const YA=Object(Oe.a)(e=>({main:{position:"relative",flex:"1 1 auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},button:{marginTop:e.spacing(3),minWidth:150},spacing:{marginTop:e.spacing(1)},chromeLogo:{marginTop:e.spacing(1),width:96,height:96},why:{alignSelf:"flex-start",marginTop:e.spacing(3)},headBox:{display:"flex",justifyContent:"space-between"},connectContainer:{flex:"1 1 auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},supportContainer:{flex:"1 1 auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}})),KA=e=>{const A=YA(),t=Object(i.c)(),{browserSupported:l,pairingFailed:r,pairingMessage:o,vintageMode:c}=g(e=>e.appState);o.toLowerCase().match(/denied/);const[s,m]=Object(a.useState)(!1);if(c){const e={dispatch:t,pairingFailed:r,pairingMessage:o};return n.a.createElement(VA,e)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ve.a,{className:A.headBox},n.a.createElement(Le.a,{component:"h1",variant:"h4"},"Web MiniDisc"),n.a.createElement(WA,null)),n.a.createElement(Le.a,{component:"h2",variant:"body2"},"Brings NetMD Devices to the Web"),n.a.createElement(Ve.a,{className:A.main},l?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:A.connectContainer},n.a.createElement(Le.a,{component:"h2",variant:"subtitle1",align:"center",className:A.spacing},"Press the button to connect to a NetMD device"),n.a.createElement(We.a,{variant:"contained",color:"primary",onClick:()=>t(Re()),className:A.button},"Connect"),n.a.createElement(Ue.a,{error:!0,className:A.spacing,style:{visibility:r?"visible":"hidden"}},n.a.createElement(Ge.a,null,o))),n.a.createElement("div",null,n.a.createElement(Le.a,{component:"h2",variant:"subtitle1",align:"center",className:A.spacing},n.a.createElement(He.a,{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ"},n.a.createElement("span",{style:{verticalAlign:"middle"}},"Support and FAQ")," ",n.a.createElement(JA.a,{style:{verticalAlign:"middle"},fontSize:"inherit"}))))):n.a.createElement(n.a.Fragment,null,n.a.createElement(Le.a,{component:"h2",variant:"subtitle1",align:"center",className:A.spacing},"This Web browser is not supported.\xa0",n.a.createElement(He.a,{rel:"noopener noreferrer",href:"#",onClick:e=>{e.preventDefault(),m(!0)}},"Learn Why")),n.a.createElement(He.a,{rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/chrome/"},n.a.createElement("img",{alt:"Chrome Logo",src:UA.a,className:A.chromeLogo})),n.a.createElement(Le.a,{component:"h2",variant:"subtitle1",align:"center",className:A.spacing},"Try using"," ",n.a.createElement(He.a,{rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/chrome/"},"Chrome")," ","instead"),s?n.a.createElement(n.a.Fragment,null,n.a.createElement(Le.a,{component:"p",variant:"body2",className:A.why},"Web MiniDisc requires a browser that supports both"," ",n.a.createElement(He.a,{rel:"noopener noreferrer",target:"_blank",href:"https://wicg.github.io/webusb/"},"WebUSB")," ","and"," ",n.a.createElement(He.a,{rel:"noopener noreferrer",target:"_blank",href:"https://webassembly.org/"},"WebAssembly"),"."),n.a.createElement("ul",null,n.a.createElement("li",null,"WebUSB is needed to control the NetMD device via the USB connection to your computer."),n.a.createElement("li",null,"WebAssembly is used to convert the music to a MiniDisc compatible format"))):null)),n.a.createElement(sA,null))};var ZA=t(4),XA=t(162),qA=t(14),$A=t(644),_A=t(156),et=t.n(_A),At=t(310),tt=t.n(At),at=t(639),nt=t(643),lt=t(642),rt=t(640),it=t(641),ot=t(636),ct=t(653),st=t(651);const mt=e=>e.renameDialogVisible?n.a.createElement(eA,null,n.a.createElement(AA,null,n.a.createElement($e.x,null,n.a.createElement("span",null,"Rename ",e.what)),n.a.createElement($e.w,null,n.a.createElement("p",{style:{marginBottom:4}},"Track Name:"),n.a.createElement($e.s,{style:{marginBottom:16},value:e.renameDialogTitle,placeholder:"Type here...",onChange:e.handleChange,onKeyDown:A=>{"Enter"===A.key&&e.handleDoRename()},fullWidth:!0}),n.a.createElement(tA,null,n.a.createElement(nA,{onClick:e.handleDoRename},"OK"),n.a.createElement(nA,{onClick:e.handleCancelRename},"Cancel"))))):null,dt=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),ut=e=>{let A=Object(i.c)(),t=g(e=>e.renameDialog.visible),l=g(e=>e.renameDialog.title),r=g(e=>e.renameDialog.index);const o=r<0?"Disc":"Track",c=()=>{A(W.setVisible(!1))},s=()=>{A(r<0?function({newName:e}){return async function(A){const{netmdService:t}=I;await t.renameDisc(e),A(W.setVisible(!1)),Te()(A)}}({newName:l}):function({index:e,newName:A}){return async function(t){const{netmdService:a}=I;t(W.setVisible(!1));try{await a.renameTrack(e,A)}catch(n){console.error(n),t(Object(P.batchActions)([V.setVisible(!0),V.setErrorMessage("Rename failed.")]))}Te()(t)}}({index:r,newName:l}))},m=Object(a.useCallback)(e=>{A(W.setCurrentName(e.target.value.substring(0,120)))},[A]),{vintageMode:d}=g(e=>e.appState);if(d){const e={renameDialogVisible:t,renameDialogTitle:l,renameDialogIndex:r,what:o,handleCancelRename:c,handleDoRename:s,handleChange:m};return n.a.createElement(mt,e)}return n.a.createElement(Je.a,{open:t,onClose:c,maxWidth:"sm",fullWidth:!0,TransitionComponent:dt,"aria-labelledby":"rename-dialog-title"},n.a.createElement(Xe.a,{id:"rename-dialog-title"},"Rename ",o),n.a.createElement(Ke.a,null,n.a.createElement(st.a,{autoFocus:!0,id:"name",label:`${o} Name`,type:"text",fullWidth:!0,value:l,onKeyDown:e=>{"Enter"===e.key&&s()},onChange:m})),n.a.createElement(Ye.a,null,n.a.createElement(We.a,{onClick:c},"Cancel"),n.a.createElement(We.a,{color:"primary",onClick:s},"Rename")))};var pt=t(633),gt=t(634),ht=t(649);const bt=e=>e.visible?n.a.createElement(eA,null,n.a.createElement(AA,null,n.a.createElement($e.x,null,n.a.createElement("span",null,"Recording...")),n.a.createElement(aA,null,n.a.createElement("div",{style:{width:"100%"}},100===e.convertedValue&&e.trackConverting===e.trackTotal?"Conversion completed":`Converting ${e.trackConverting+1} of ${e.trackTotal}: ${e.titleConverting}`),n.a.createElement($e.k,{value:Math.floor(e.convertedValue)}),n.a.createElement("div",{style:{width:"100%",marginTop:16}},"Uploading ",e.trackCurrent," of ",e.trackTotal,": ",e.titleCurrent),n.a.createElement($e.k,{value:e.progressValue}),n.a.createElement(tA,null,e.hasNotificationSupport?n.a.createElement($e.d,{name:"notifyOnEnd",label:"Notify when completed",checked:e.notifyWhenFinished,onChange:e.handleNotifyWhenFinishedChanged}):null,n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement($e.c,{disabled:e.cancelled,onClick:e.handleCancelUpload},e.cancelled?"Stopping after current track...":"Cancel Recording"))))):null,Et=Object(Oe.a)(e=>({progressPerc:{marginTop:e.spacing(1)},progressBar:{marginTop:e.spacing(3)},uploadLabel:{marginTop:e.spacing(3)},spacer:{flex:"1 1 auto"},checkBox:{marginLeft:0}})),ft=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),vt=e=>{const A=Et(),t=Object(i.c)();let{visible:l,cancelled:r,writtenProgress:o,encryptedProgress:c,totalProgress:s,trackTotal:m,trackCurrent:d,trackConverting:u,titleCurrent:p,titleConverting:h}=g(e=>e.uploadDialog);const{vintageMode:b,notifyWhenFinished:E,hasNotificationSupport:f}=g(e=>e.appState),v=Object(a.useCallback)(()=>{t(M.setCancelUpload(!0))},[t]),w=Object(a.useCallback)(()=>{t(Me(!E))},[t,E]);let C=Math.floor(o/s*100),k=Math.floor(c/s*100),y=Math.floor(u/m*100);if(b){const e={visible:l,cancelled:r,writtenProgress:o,encryptedProgress:c,totalProgress:s,trackTotal:m,trackCurrent:d,trackConverting:u,titleCurrent:p,titleConverting:h,handleCancelUpload:v,progressValue:C,bufferValue:k,convertedValue:y,notifyWhenFinished:E,hasNotificationSupport:f,handleNotifyWhenFinishedChanged:w};return n.a.createElement(bt,e)}return n.a.createElement(Je.a,{open:l,maxWidth:"sm",fullWidth:!0,TransitionComponent:ft,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},n.a.createElement(Xe.a,{id:"alert-dialog-slide-title"},"Recording..."),n.a.createElement(Ke.a,null,n.a.createElement(Ze.a,{id:"alert-dialog-slide-description"},100===y&&u===m?"Conversion completed":`Converting ${u+1} of ${m}: ${h}`),n.a.createElement(pt.a,{className:A.progressBar,variant:0===y?"indeterminate":"determinate",color:"primary",value:y}),n.a.createElement(Ve.a,{className:A.progressPerc},y,"%"),n.a.createElement(Ze.a,{id:"alert-dialog-slide-description",className:A.uploadLabel},"Uploading ",d," of ",m,": ",p),n.a.createElement(pt.a,{className:A.progressBar,variant:"buffer",color:"secondary",value:C,valueBuffer:k}),n.a.createElement(Ve.a,{className:A.progressPerc},C,"%")),n.a.createElement(Ye.a,null,f?n.a.createElement(gt.a,{className:A.checkBox,disabled:!f,control:n.a.createElement(ht.a,{checked:E,onChange:w,name:"notifyOnEnd"}),label:"Notify when completed"}):null,n.a.createElement("div",{className:A.spacer}),n.a.createElement(We.a,{disabled:r,onClick:v},r?"Stopping after current track...":"Cancel Recording")))},wt=e=>e.visible?n.a.createElement(eA,null,n.a.createElement(AA,null,n.a.createElement($e.x,null,n.a.createElement("span",null,"Recording...")),n.a.createElement(aA,null,n.a.createElement("p",{style:{marginBottom:16,width:"100%"}},`Recording track ${e.trackDone+1} of ${e.trackTotal}: ${e.titleCurrent}`),n.a.createElement($e.k,{value:e.progressValue,hideValue:e.progressValue<0})))):null,Ct=Object(Oe.a)(e=>({progressPerc:{marginTop:e.spacing(1)},progressBar:{marginTop:e.spacing(3)}})),kt=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),yt=e=>{const A=Ct();let{visible:t,trackTotal:a,trackDone:l,trackCurrent:r,titleCurrent:i}=g(e=>e.recordDialog),o=Math.round(r);if(g(e=>e.appState.vintageMode)){const e={visible:t,trackTotal:a,trackDone:l,trackCurrent:r,titleCurrent:i,progressValue:o};return n.a.createElement(wt,e)}return n.a.createElement(Je.a,{open:t,maxWidth:"sm",fullWidth:!0,TransitionComponent:kt,"aria-labelledby":"record-dialog-slide-title","aria-describedby":"record-dialog-slide-description"},n.a.createElement(Xe.a,{id:"record-dialog-slide-title"},"Recording..."),n.a.createElement(Ke.a,null,n.a.createElement(Ze.a,{id:"record-dialog-slide-description"},`Recording track ${l+1} of ${a}: ${i}`),n.a.createElement(pt.a,{className:A.progressBar,variant:r>=0?"determinate":"indeterminate",color:"primary",value:o}),n.a.createElement(Ve.a,{className:A.progressPerc},o>=0?`${o}%`:"")),n.a.createElement(Ye.a,null))},Dt=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),xt=e=>{const A=Object(i.c)();let{visible:t,error:l}=g(e=>e.errorDialog);const r=Object(a.useCallback)(()=>{A(V.setVisible(!1))},[A]);return n.a.createElement(Je.a,{open:t,maxWidth:"sm",fullWidth:!0,TransitionComponent:Dt,"aria-labelledby":"error-dialog-slide-title","aria-describedby":"error-dialog-slide-description"},n.a.createElement(Xe.a,{id:"alert-dialog-slide-title"},"Error"),n.a.createElement(Ke.a,null,n.a.createElement(Ze.a,{id:"alert-dialog-slide-description"},l)),n.a.createElement(Ye.a,null,n.a.createElement(We.a,{onClick:r},"Close")))},Ot=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),St=e=>{const A=Object(i.c)();let{visible:t,dismissed:l}=g(e=>e.panicDialog);const r=Object(a.useCallback)(()=>{window.location.reload()},[]),o=Object(a.useCallback)(()=>{A(K.dismiss())},[A]);return n.a.createElement(Je.a,{open:t&&!l,maxWidth:"sm",fullWidth:!0,scroll:"paper",TransitionComponent:Ot,"aria-labelledby":"error-dialog-slide-title","aria-describedby":"error-dialog-slide-description"},n.a.createElement(Xe.a,{id:"alert-dialog-slide-title"},"Oops\u2026 Something unexpected happened."),n.a.createElement(Ke.a,null,n.a.createElement(Le.a,{color:"textSecondary",variant:"body1",component:"div"},"Try to restart the app. If the error persists, try the followings:",n.a.createElement("ol",null,n.a.createElement("li",null,"Use your browser in incognito mode."),n.a.createElement("li",null,"Use a blank MiniDisc."),n.a.createElement("li",null,"Try to use Web MiniDisc on another computer.")),"If this does not solve the error, your unit might not be supported yet or you have encountered a bug. The full error is reported in the JS console.")),n.a.createElement(Ye.a,null,n.a.createElement(We.a,{onClick:o,size:"small"},"Ignore and Continue"),n.a.createElement(We.a,{onClick:r,color:"primary"},"Restart the App")))};var Bt=t(635),It=t(655),jt=t(648),Nt=t(631),Pt=t(650),Rt=t(637),Tt=t(302),Mt=t.n(Tt),Qt=t(303),Ft=t.n(Qt),zt=t(301),Wt=t.n(zt),Lt=t(627),Ut=t(582),Gt=t(647),Vt=t(299),Ht=t.n(Vt),Jt=t(300),Yt=t.n(Jt),Kt=t(155),Zt=t.n(Kt);const Xt=[{value:"filename",label:"Filename"},{value:"title",label:"Title"},{value:"album-title",label:"Album - Title"},{value:"artist-title",label:"Artist - Title"},{value:"artist-album-title",label:"Artist - Album - Title"}],qt=[{value:"SP",label:"SP"},{value:"LP2",label:"LP2"},{value:"LP4",label:"LP4"}],$t=e=>{const A=Object(a.useContext)(_e.a),t=Object(a.useCallback)(()=>e.files.map((t,a)=>{const l=e.selectedTrackIndex===a,r=l?e.selectedTrackRef:null;return n.a.createElement(lA,{key:`${a}`,onClick:()=>e.setSelectedTrack(a),ref:r,style:l?A.selectedTableRow:{}},n.a.createElement($e.o,null,t.name))}),[e,A]);return e.dialogVisible?n.a.createElement(eA,null,n.a.createElement(AA,null,n.a.createElement($e.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("span",{style:{flex:"1 1 auto"}},"Upload Settings"),n.a.createElement($e.c,{onClick:e.handleClose},n.a.createElement(rA,null))),n.a.createElement(aA,null,n.a.createElement("div",{style:{display:"flex",width:"100%"}},n.a.createElement($e.f,{label:"Recording Mode",style:{display:"flex",flex:"1 1 auto"}},n.a.createElement($e.l,{defaultValue:e.format,options:qt,width:90,onChange:(A,t)=>e.handleChangeFormat(A,t.value)})),n.a.createElement($e.f,{label:"Track title",style:{flex:"1 1 auto",marginLeft:16}},n.a.createElement($e.l,{defaultValue:e.titleFormat,options:Xt,width:180,onChange:e.handleChangeTitleFormat}))),e.tracksOrderVisible?n.a.createElement("div",Object.assign({},e.getRootProps(),{style:{width:"100%",marginTop:16}}),n.a.createElement($e.e,{style:{marginTop:16}}),n.a.createElement($e.t,{style:{display:"flex"}},n.a.createElement($e.c,{variant:"menu",onClick:e.open},"Add..."),n.a.createElement($e.c,{variant:"menu",disabled:e.disableRemove,onClick:e.handleRemoveSelectedTrack},n.a.createElement("img",{alt:"delete",src:Zt.a,style:{marginRight:4}}),"Remove"),n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement($e.c,{variant:"menu",disabled:e.disableRemove,onClick:e.moveFileDown},n.a.createElement("img",{alt:"Move Down",src:Yt.a})),n.a.createElement($e.c,{variant:"menu",disabled:e.disableRemove,onClick:e.moveFileUp},n.a.createElement("img",{alt:"Move Up",src:Ht.a}))),n.a.createElement("div",{style:{maxHeight:"30vh",overflow:"scroll"}},n.a.createElement($e.m,null,n.a.createElement($e.n,null,t()))),n.a.createElement("input",e.getInputProps())):null,n.a.createElement(tA,null,n.a.createElement($e.c,{onClick:e.handleToggleTracksOrder},`${e.tracksOrderVisible?"Hide":"Show"} Tracks`),n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement(nA,{onClick:e.handleConvert},"OK"),n.a.createElement(nA,{onClick:e.handleClose},"Cancel"))))):null},_t=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),ea=Object(Oe.a)(e=>({container:{display:"flex",flexDirection:"row"},formControl:{minWidth:60},toggleButton:{minWidth:40},dialogContent:{display:"flex",flexDirection:"column",justifyContent:"stretch"},formatAndTitle:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},rightBlock:{display:"flex",flexDirection:"column"},titleFormControl:{minWidth:170,marginTop:4,[y(e)]:{width:114,minWidth:0}},spacer:{display:"flex",flex:"1 1 auto"},showTracksOrderBtn:{marginLeft:e.spacing(1)},tracksOrderAccordion:{"&:before":{opacity:0}},tracksOrderAccordionDetail:{maxHeight:"40vh",overflow:"auto"},toolbarHighlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(qA.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},trackList:{flex:"1 1 auto"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})),Aa=e=>{const A=Object(i.c)(),t=ea();let{visible:l,format:r,titleFormat:o}=g(e=>e.convertDialog);const[c,s]=Object(a.useState)(e.files),[m,d]=Object(a.useState)(-1),u=Object(a.useCallback)(e=>{const A=m+e;if(A>=c.length||A<0)return;const t=c.slice();let a=t[m];t[m]=t[A],t[A]=a,s(t),d(A)},[c,m]),p=Object(a.useCallback)(()=>{u(-1)},[u]),h=Object(a.useCallback)(()=>{u(1)},[u]),b=Object(a.useCallback)(()=>{A(_.setVisible(!1))},[A]),E=Object(a.useCallback)((e,t)=>{null!==t&&A(_.setFormat(t))},[A]),f=Object(a.useCallback)(e=>{A(_.setTitleFormat(e.target.value))},[A]),v=Object(a.useCallback)(()=>{b(),A(ze(c,r,o))},[A,c,r,o,b]),[w,C]=Object(a.useState)(!1),k=Object(a.useCallback)(()=>{C(!w)},[w,C]);Object(a.useEffect)(()=>{const A=Array.from(e.files);s(A),d(-1),C(!1)},[e.files,d,C]);const y=Object(a.useRef)(null);Object(a.useEffect)(()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({block:"nearest",behavior:"smooth"})},[y,m]);const D=Object(a.useCallback)(()=>c.map((e,A)=>{const t=m===A,a=t?y:null;return n.a.createElement(Ut.a,{key:`${A}`,disableGutters:!0,onClick:()=>d(A),ref:a,button:!0},n.a.createElement(hA.a,null,n.a.createElement(Gt.a,{checked:t,value:`track-${A}`,size:"small"})),n.a.createElement(bA.a,{primary:e.name}))}),[c,m,d,y]),x=Object(a.useCallback)((e,A)=>{const t=c.slice().concat(e);s(t)},[c,s]),{getRootProps:O,getInputProps:S,isDragActive:B,open:I}=Object(XA.a)({onDrop:x,accept:["audio/*","video/mp4"],noClick:!0}),j=m<0||m>=c.length,N=Object(a.useCallback)(()=>{const e=c.filter((e,A)=>A!==m);s(e),m>=e.length&&d(e.length-1)},[m,c,s]),P=g(e=>e.convertDialog.visible);if(Object(a.useEffect)(()=>{P&&0===c.length&&b()},[c,P,b]),g(e=>e.appState.vintageMode)){const e={visible:l,format:r,titleFormat:o,files:c,setFiles:s,selectedTrackIndex:m,setSelectedTrack:d,moveFileUp:p,moveFileDown:h,handleClose:b,handleChangeFormat:E,handleChangeTitleFormat:f,handleConvert:v,tracksOrderVisible:w,setTracksOrderVisible:C,handleToggleTracksOrder:k,selectedTrackRef:y,getRootProps:O,getInputProps:S,isDragActive:B,open:I,disableRemove:j,handleRemoveSelectedTrack:N,dialogVisible:P};return n.a.createElement($t,e)}return n.a.createElement(Je.a,{open:l,maxWidth:"xs",fullWidth:!0,TransitionComponent:_t,"aria-labelledby":"convert-dialog-slide-title","aria-describedby":"convert-dialog-slide-description"},n.a.createElement(Xe.a,{id:"convert-dialog-slide-title"},"Upload Settings"),n.a.createElement(Ke.a,{className:t.dialogContent},n.a.createElement("div",{className:t.formatAndTitle},n.a.createElement(Ue.a,null,n.a.createElement(Le.a,{component:"label",variant:"caption",color:"textSecondary"},"Recording Mode"),n.a.createElement(It.a,{value:r,exclusive:!0,onChange:E,size:"small"},n.a.createElement(Bt.a,{className:t.toggleButton,value:"SP"},"SP"),n.a.createElement(Bt.a,{className:t.toggleButton,value:"LP2"},"LP2"),n.a.createElement(Bt.a,{className:t.toggleButton,value:"LP4"},"LP4"))),n.a.createElement("div",{className:t.rightBlock},n.a.createElement(Ue.a,{className:t.formControl},n.a.createElement(Le.a,{component:"label",variant:"caption",color:"textSecondary"},"Track title"),n.a.createElement(Ue.a,{className:t.titleFormControl},n.a.createElement(jt.a,{value:o,color:"secondary",input:n.a.createElement(Nt.a,null),onChange:f},n.a.createElement(uA.a,{value:"filename"},"Filename"),n.a.createElement(uA.a,{value:"title"},"Title"),n.a.createElement(uA.a,{value:"album-title"},"Album - Title"),n.a.createElement(uA.a,{value:"artist-title"},"Artist - Title"),n.a.createElement(uA.a,{value:"artist-album-title"},"Artist - Album - Title")))))),n.a.createElement(Pt.a,{expanded:w,className:t.tracksOrderAccordion,square:!0},n.a.createElement("div",null),n.a.createElement("div",Object.assign({},O(),{style:{outline:"none"}}),n.a.createElement(ot.a,{variant:"dense",className:t.toolbarHighlight},n.a.createElement(mA.a,{edge:"start","aria-label":"add track",onClick:I},n.a.createElement(et.a,null)),n.a.createElement(mA.a,{edge:"start","aria-label":"remove track",onClick:N,disabled:j},n.a.createElement(Wt.a,null)),n.a.createElement("div",{className:t.spacer}),n.a.createElement(mA.a,{edge:"end","aria-label":"move up",onClick:h},n.a.createElement(Mt.a,null)),n.a.createElement(mA.a,{edge:"end","aria-label":"move down",onClick:p},n.a.createElement(Ft.a,null))),n.a.createElement(Rt.a,{className:t.tracksOrderAccordionDetail},n.a.createElement(Lt.a,{dense:!0,disablePadding:!1,className:t.trackList},D())),n.a.createElement(De.a,{className:t.backdrop,open:B},"Drop your Music to add it to the queue"),n.a.createElement("input",S())))),n.a.createElement(Ye.a,null,n.a.createElement(We.a,{onClick:k,className:t.showTracksOrderBtn},`${w?"Hide":"Show"} Tracks`),n.a.createElement("div",{className:t.spacer}),n.a.createElement(We.a,{onClick:b},"Cancel"),n.a.createElement(We.a,{onClick:v},"Ok")))};var ta=t(158),aa=t.n(ta),na=t(159),la=t.n(na),ra=t(160),ia=t.n(ra),oa=t(157),ca=t.n(oa);function sa(){return(sa=Object.assign||function(e){for(var A=1;A<arguments.length;A++){var t=arguments[A];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var ma=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M53.259 20.337c6.582-5.574 6.582-5.574 14.753-12.436C62.599 6.72 56.322 6 49.946 6c-6.485 0-12.82.747-18.303 1.966 6.675 5.894 7.084 6.191 14.006 12.252 3.48-.293 3.97-.293 7.61.12zM36.927 24.504c.992-1.544 2.25-2.448 5.124-3.474-5.486-4.744-7.34-6.324-14.003-12.173-11.485 3.264-19.33 9.02-20.049 15.647h28.928zM61.159 24.504c14.02 0 20.615 0 30.732-.004-.789-6.629-8.72-12.468-20.269-15.706-2.061 1.766-11.14 9.316-14.827 12.484 1.793.813 3.226 1.35 4.364 3.226zM40.996 30.602c-2.045-.884-3.476-1.935-4.042-3.102-1.056 0-26.431 0-28.782.039C9.53 33.6 16.924 38.847 27.455 41.964c4.236-3.528 8.255-6.948 13.541-11.362zM49.946 45c6.284 0 12.247-.64 17.6-1.79-4.721-4.135-7.729-6.721-13.454-11.689-3.681.692-6.213.59-9.6.068-4.888 4.125-10.974 9.218-13.473 11.324C36.707 44.248 43.137 45 49.946 45zM57.47 30.45c4.38 3.707 9.262 8.068 13.687 11.884 11.265-3.066 19.178-8.5 20.57-14.83H61.18c-.667.999-1.516 1.917-3.71 2.946z"}));const da=({svgRef:e,title:A,...t})=>n.a.createElement("svg",sa({width:98,height:52,viewBox:"0 0 98 52",ref:e},t),A?n.a.createElement("title",null,A):null,ma),ua=n.a.forwardRef((e,A)=>n.a.createElement(da,sa({svgRef:A},e)));t.p;function pa(){return(pa=Object.assign||function(e){for(var A=1;A<arguments.length;A++){var t=arguments[A];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var ga=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M36.927 24.504c.992-1.544 2.25-2.448 5.124-3.474-5.486-4.744-7.34-6.324-14.003-12.173-11.485 3.264-19.33 9.02-20.049 15.647h28.928zM57.47 30.45c4.38 3.707 9.262 8.068 13.687 11.884 11.265-3.066 19.178-8.5 20.57-14.83H61.18c-.667.999-1.516 1.917-3.71 2.946z"}));const ha=({svgRef:e,title:A,...t})=>n.a.createElement("svg",pa({width:98,height:52,viewBox:"0 0 98 52",ref:e},t),A?n.a.createElement("title",null,A):null,ga),ba=n.a.forwardRef((e,A)=>n.a.createElement(ha,pa({svgRef:A},e)));t.p;function Ea(){return(Ea=Object.assign||function(e){for(var A=1;A<arguments.length;A++){var t=arguments[A];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var fa=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M53.259 20.337c6.582-5.574 6.582-5.574 14.753-12.436C62.599 6.72 56.322 6 49.946 6c-6.485 0-12.82.747-18.303 1.966 6.675 5.894 7.084 6.191 14.006 12.252 3.48-.293 3.97-.293 7.61.12zM49.946 45c6.284 0 12.247-.64 17.6-1.79-4.721-4.135-7.729-6.721-13.454-11.689-3.681.692-6.213.59-9.6.068-4.888 4.125-10.974 9.218-13.473 11.324C36.707 44.248 43.137 45 49.946 45z"}));const va=({svgRef:e,title:A,...t})=>n.a.createElement("svg",Ea({width:98,height:52,viewBox:"0 0 98 52",ref:e},t),A?n.a.createElement("title",null,A):null,fa),wa=n.a.forwardRef((e,A)=>n.a.createElement(va,Ea({svgRef:A},e)));t.p;function Ca(){return(Ca=Object.assign||function(e){for(var A=1;A<arguments.length;A++){var t=arguments[A];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var ka=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M61.159 24.504c14.02 0 20.615 0 30.732-.004-.789-6.629-8.72-12.468-20.269-15.706-2.061 1.766-11.14 9.316-14.827 12.484 1.793.813 3.226 1.35 4.364 3.226zM40.996 30.602c-2.045-.884-3.476-1.935-4.042-3.102-1.056 0-26.431 0-28.782.039C9.53 33.6 16.924 38.847 27.455 41.964c4.236-3.528 8.255-6.948 13.541-11.362z"}));const ya=({svgRef:e,title:A,...t})=>n.a.createElement("svg",Ca({width:98,height:52,viewBox:"0 0 98 52",ref:e},t),A?n.a.createElement("title",null,A):null,ka),Da=n.a.forwardRef((e,A)=>n.a.createElement(ya,Ca({svgRef:A},e)));t.p;const xa=Object(Oe.a)(e=>({container:{display:"flex",flex:"1 1 auto",alignItems:"center",[y(e)]:{flexWrap:"wrap"}},lcd:{backgroundColor:"black !important",flex:"1 1 auto",margin:"0 80px 0 0px",minWidth:150,height:48,color:"white !important",fontFamily:"LCDDot"}})),Oa=e=>{const A=xa();return n.a.createElement("div",{className:A.container},n.a.createElement($e.c,{onClick:e.handlePrev},n.a.createElement(ca.a,null)),n.a.createElement($e.c,{onClick:e.handlePlay},n.a.createElement(aa.a,null)),n.a.createElement($e.c,{onClick:e.handleStop},n.a.createElement(la.a,null)),n.a.createElement($e.c,{onClick:e.handleNext,style:{marginRight:16}},n.a.createElement(ia.a,null)),n.a.createElement($e.j,{variant:"well",className:A.lcd},n.a.createElement("div",{className:e.classes.lcdText,style:{left:16,width:"calc(100% - 16px)"}},n.a.createElement("span",{className:e.lcdScroll?e.classes.scrollingStatusMessage:e.classes.statusMessage,ref:e.lcdRef,style:e.message&&e.lcdScroll>0?{animationDuration:`${e.lcdScrollDuration}s`,transform:`translate(-${e.lcdScroll}%)`,top:12}:{top:12}},e.message))))},Sa=[ua,ba,wa,Da],Ba=Object(Oe.a)(e=>({"@keyframes scrollLeft":{from:{transform:"translateX(0%)"},to:{}},container:{display:"flex",flex:"1 1 auto",[y(e)]:{flexWrap:"wrap"}},lcd:{flex:"1 1 auto",position:"relative",marginLeft:e.spacing(1.5),marginRight:e.spacing(1.5),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),borderRadius:e.spacing(3),backgroundColor:e.palette.background.default,minWidth:150,height:48,[y(e)]:{marginLeft:0,marginRight:e.spacing(2)}},lcdText:{overflow:"hidden",position:"relative",width:"calc(100% - 40px)",left:40,height:"100%",fontFamily:"LCDDot"},lcdDisc:{position:"absolute",top:0,left:20},lcdDiscIcon:{width:28,height:48,"& g":{fill:e.palette.action.active}},scrollingStatusMessage:{position:"absolute",width:"100%",whiteSpace:"nowrap",animationName:"$scrollLeft",animationTimingFunction:"linear",animationIterationCount:"1",top:15,left:1},statusMessage:{position:"absolute",width:"100%",whiteSpace:"nowrap",top:15,left:1},button:{}})),Ia=()=>{var e,A,t;const l=Object(i.c)(),r=g(e=>e.main.deviceStatus),o=g(e=>e.main.disc),c=Ba(),s=Object(a.useCallback)(()=>{l(Pe("prev"))},[l]),m=Object(a.useCallback)(()=>{l(Pe("play"))},[l]),d=Object(a.useCallback)(()=>{l(Pe("stop"))},[l]),u=Object(a.useCallback)(()=>{l(Pe("next"))},[l]);let p="",h=null!==(e=null===r||void 0===r?void 0:r.track)&&void 0!==e?e:null,b=null!==(A=null===r||void 0===r?void 0:r.state)&&void 0!==A?A:null,E=null!==(t=null===r||void 0===r?void 0:r.discPresent)&&void 0!==t&&t;const f=w(o);E?"readingTOC"===b?p="READING TOC":0===f.length?p="BLANKDISC":r&&null!==r.track&&f[r.track]&&(p=`${r.track+1} - `+f[r.track].title):p="";const[v,C]=Object(a.useState)(0),[k,y]=Object(a.useState)(0),[D,x]=Object(a.useState)(0),O=Object(a.useRef)(null),S=Object(a.useRef)(null);Object(a.useEffect)(()=>(clearTimeout(O.current),C(0),O.current=setTimeout(()=>{(()=>{var e,A,t;const a=S.current,n=null!==(e=null===a||void 0===a?void 0:a.scrollWidth)&&void 0!==e?e:0,l=null!==(A=null===a||void 0===a?void 0:null===(t=a.parentElement)||void 0===t?void 0:t.offsetWidth)&&void 0!==A?A:0,r=n>l?n/20:0;C(n>l?100*n/l:0),y(r),r>0&&(O.current=setTimeout(()=>{C(0)},1e3*r+500))})()},2e3),()=>{clearTimeout(O.current)}),[h,b,p]);const B=Object(a.useRef)(null);Object(a.useEffect)(()=>(clearInterval(B.current),"playing"===b||"readingTOC"===b?B.current=setInterval(()=>{x(1+D%(Sa.length-1))},600):x(0),()=>{clearInterval(B.current)}),[b,D]);const I=Sa[D];if(g(e=>e.appState.vintageMode)){const e={handlePrev:s,handlePlay:m,handleStop:d,handleNext:u,message:p,discPresent:E,lcdScroll:v,lcdRef:S,lcdScrollDuration:k,classes:c};return n.a.createElement(Oa,e)}return n.a.createElement(Ve.a,{className:c.container},n.a.createElement(mA.a,{"aria-label":"prev",onClick:s,className:c.button},n.a.createElement(ca.a,null)),n.a.createElement(mA.a,{"aria-label":"play",onClick:m,className:c.button},n.a.createElement(aa.a,null)),n.a.createElement(mA.a,{"aria-label":"stop",onClick:d,className:c.button},n.a.createElement(la.a,null)),n.a.createElement(mA.a,{"aria-label":"next",onClick:u,className:c.button},n.a.createElement(ia.a,null)),n.a.createElement("div",{className:c.lcd},n.a.createElement("div",{className:c.lcdText},n.a.createElement("span",{className:v?c.scrollingStatusMessage:c.statusMessage,ref:S,style:p&&v>0?{animationDuration:`${k}s`,transform:`translate(-${v}%)`}:{}},p)),n.a.createElement("div",{className:c.lcdDisc},E&&n.a.createElement(I,{className:c.lcdDiscIcon}))))},ja=e=>e.visible?n.a.createElement(eA,null,n.a.createElement(AA,null,n.a.createElement($e.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("span",{style:{flex:"1 1 auto"}},"Record Selected Tracks"),n.a.createElement($e.c,{onClick:e.handleClose},n.a.createElement(rA,null))),n.a.createElement(aA,null,n.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"flex-Start",flexDirection:"column"}},n.a.createElement("p",null,"1. Connect your MD Player line-out to your PC audio line-in."),n.a.createElement("p",null,"2. Use the controls at the bottom right to play some tracks."),n.a.createElement("p",null,"3. Select the input source. You should hear the tracks playing on your PC."),n.a.createElement("p",null,"4. Adjust the input gain and the line-out volume of your device."),n.a.createElement($e.f,{label:"Input Source",style:{display:"flex",flex:"1 1 auto",margin:"32px 0"}},n.a.createElement($e.l,{defaultValue:e.inputDeviceId||"",options:e.devices.concat([{deviceId:"",label:"None"}]).map(({deviceId:e,label:A})=>({value:e,label:A})),onChange:e.handleChange,width:200})),n.a.createElement(Ia,null)),n.a.createElement(tA,null,n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement(nA,{onClick:e.handleClose},"Cancel"),n.a.createElement(nA,{onClick:e.handleStartTransfer,disabled:""===e.inputDeviceId},"Start Record"))))):null,Na=n.a.forwardRef((function(e,A){return n.a.createElement(qe.a,Object.assign({direction:"up",ref:A},e))})),Pa=Object(Oe.a)(e=>({container:{display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",marginRight:-e.spacing(2),flexFlow:"wrap"},formControl:{minWidth:120},selectEmpty:{marginTop:e.spacing(2)},head:{textShadow:"0px 0px 12px rgba(150, 150, 150, 1)",fontSize:e.typography.h2.fontSize,textAlign:"center",marginBottom:e.spacing(2)}})),Ra=({trackIndexes:e})=>{const A=Object(i.c)(),t=Pa(),[l,r]=Object(a.useState)([]),[o,c]=Object(a.useState)("");let{visible:s}=g(e=>e.dumpDialog);const d=Object(a.useCallback)(()=>{var e;c(""),null===(e=I.mediaRecorderService)||void 0===e||e.stopTestInput(),A(ne.setVisible(!1))},[A]),h=Object(a.useCallback)(e=>{var A,t;const a=e.target.value;c(a),null===(A=I.mediaRecorderService)||void 0===A||A.stopTestInput(),null===(t=I.mediaRecorderService)||void 0===t||t.playTestInput(a)},[c]),b=Object(a.useCallback)(()=>{var t,a;A((t=e,a=o,async function(e,A){e(Object(P.batchActions)([oe.setVisible(!0),oe.setProgress({trackTotal:t.length,trackDone:0,trackCurrent:0,titleCurrent:""})]));let n=A().main.disc,l=Object(m.getTracks)(n).filter(e=>t.indexOf(e.index)>=0);const{netmdService:r,mediaRecorderService:i}=I;await I.netmdService.stop();for(let[t,c]of l.entries()){var o;e(oe.setProgress({trackTotal:l.length,trackDone:t,trackCurrent:-1,titleCurrent:null!==(o=c.title)&&void 0!==o?o:""})),await r.gotoTrack(c.index),await r.play(),console.log("Waiting for track to be ready to play");let A=await r.getPosition(),n=[c.index,0,0,1];for(;null===A||!n.every((e,t)=>n[t]===A[t]);)await u(250),A=await r.getPosition();await r.pause(),await(null===r||void 0===r?void 0:r.gotoTrack(c.index)),console.log("Track is ready to play"),await(null===i||void 0===i?void 0:i.initStream(a)),await(null===i||void 0===i?void 0:i.startRecording()),await r.play();let s=c.duration/512;await p(1e3*s,A=>{var a;e(oe.setProgress({trackTotal:l.length,trackDone:t,trackCurrent:A,titleCurrent:null!==(a=c.title)&&void 0!==a?a:""}))}),await(null===i||void 0===i?void 0:i.stopRecording()),null===i||void 0===i||i.downloadRecorded(`${c.title}`),await(null===i||void 0===i?void 0:i.closeStream())}await r.stop(),e(oe.setVisible(!1))})),d()},[e,o,A,d]);if(Object(a.useEffect)(()=>{s&&async function(){await navigator.mediaDevices.getUserMedia({audio:!0});let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind).map(e=>({deviceId:e.deviceId,label:e.label}));r(e)}()},[s,r]),g(e=>e.appState.vintageMode)){const e={handleClose:d,handleChange:h,handleStartTransfer:b,visible:s,devices:l,inputDeviceId:o};return n.a.createElement(ja,e)}return n.a.createElement(Je.a,{open:s,maxWidth:"sm",fullWidth:!0,TransitionComponent:Na,"aria-labelledby":"dump-dialog-slide-title","aria-describedby":"dump-dialog-slide-description"},n.a.createElement(Xe.a,{id:"dump-dialog-slide-title"},"Record Selected Tracks"),n.a.createElement(Ke.a,null,n.a.createElement(Le.a,{component:"p",variant:"h2",className:t.head},"\ud83d\udcbb \u2b05 \ud83d\udcbd"),n.a.createElement(Le.a,{component:"p",variant:"body2"},"1. Connect your MD Player line-out to your PC audio line-in."),n.a.createElement(Le.a,{component:"p",variant:"body2"},"2. Use the controls at the bottom right to play some tracks."),n.a.createElement(Le.a,{component:"p",variant:"body2"},"3. Select the input source. You should hear the tracks playing on your PC."),n.a.createElement(Le.a,{component:"p",variant:"body2"},"4. Adjust the input gain and the line-out volume of your device."),n.a.createElement(Ve.a,{className:t.container},n.a.createElement(Ue.a,{className:t.formControl},n.a.createElement(jt.a,{value:o,onChange:h,displayEmpty:!0,className:t.selectEmpty},n.a.createElement(uA.a,{value:"",disabled:!0},"Input Source"),l.map(e=>n.a.createElement(uA.a,{key:e.deviceId,value:e.deviceId},e.label))),n.a.createElement(Ge.a,null,"Input Source")),n.a.createElement(Ia,null))),n.a.createElement(Ye.a,null,n.a.createElement(We.a,{onClick:d},"Cancel"),n.a.createElement(We.a,{onClick:b,disabled:""===o},"Start Record")))};var Ta=t(196),Ma=t(304),Qa=t.n(Ma),Fa=t(305),za=t.n(Fa),Wa=t(306),La=t.n(Wa),Ua=t(307),Ga=t.n(Ua),Va=t(308),Ha=t.n(Va);const Ja=Object(Oe.a)(e=>({container:{width:"100%",flex:"1 1 auto",display:"flex",minHeight:0,"& > div":{display:"flex",flexDirection:"column",width:"100%"}},table:{height:"100%",width:"100%",display:"flex !important",flexDirection:"column"},windowContent:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:0},controlsContainer:{width:"100%",marginTop:16},toolbarIcon:{marginRight:4},toolbarItem:{padding:"6px 10px"}})),Ya=e=>{var A;const t=Ja(),l=Object(a.useContext)(_e.a),{mainView:r}=g(e=>e.appState);return n.a.createElement(n.a.Fragment,null,n.a.createElement($e.e,null),n.a.createElement($e.t,{style:{flexWrap:"wrap",position:"relative"}},0===e.selectedCount?n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{alt:"device",src:Ga.a,style:{marginTop:-10,marginLeft:10}}),n.a.createElement("div",{className:t.toolbarItem},`${e.deviceName}: (`||"Loading...",(null===(A=e.disc)||void 0===A?void 0:A.title)||"Untitled Disc",")"),n.a.createElement($e.b,{size:35}),n.a.createElement("img",{alt:"minidisc",src:Ha.a,style:{width:32,marginLeft:10}}),null!==e.disc?n.a.createElement($e.u,{text:`${Object(m.formatTimeFromFrames)(2*e.disc.left,!1)} in LP2 or ${Object(m.formatTimeFromFrames)(4*e.disc.left,!1)} in LP4`,enterDelay:100,leaveDelay:500},n.a.createElement("div",{className:t.toolbarItem},`${Object(m.formatTimeFromFrames)(e.disc.left,!1)} left of ${Object(m.formatTimeFromFrames)(e.disc.total,!1)} `)):null):null,e.selectedCount>0?n.a.createElement(n.a.Fragment,null,n.a.createElement($e.c,{variant:"menu",disabled:1!==e.selectedCount,onClick:e.handleShowMoveMenu},n.a.createElement("img",{alt:"move",src:za.a,className:t.toolbarIcon}),"Move"),n.a.createElement($e.c,{variant:"menu",onClick:e.handleShowDumpDialog},n.a.createElement("img",{alt:"record",src:Qa.a,className:t.toolbarIcon}),"Record"),n.a.createElement($e.c,{variant:"menu",onClick:e.handleDeleteSelected},n.a.createElement("img",{alt:"delete",src:Zt.a,className:t.toolbarIcon}),"Delete"),n.a.createElement($e.c,{variant:"menu",onClick:e.handleRenameActionClick,disabled:e.selectedCount>1},n.a.createElement("img",{alt:"rename",src:La.a,className:t.toolbarIcon}),"Rename"),e.moveMenuAnchorEl?n.a.createElement($e.h,{style:{position:"absolute",left:16,top:32,zIndex:2}},Array(e.tracks.length).fill(null).map((A,t)=>n.a.createElement($e.i,{key:`pos-${t}`,onClick:()=>e.handleMoveSelectedTrack(t)},t+1))):null):null,n.a.createElement($e.b,{size:35})),n.a.createElement($e.e,null),n.a.createElement($e.w,{className:t.windowContent},n.a.createElement("div",Object.assign({className:t.container},e.getRootProps(),{style:{outline:"none"}}),n.a.createElement("input",e.getInputProps()),n.a.createElement($e.m,{className:t.table},n.a.createElement($e.p,null,n.a.createElement($e.r,{head:!0,style:{display:"flex"}},n.a.createElement($e.q,{style:{width:"2ch"}},"#"),n.a.createElement($e.q,{style:{textAlign:"left",flex:"1 1 auto"}},"Title"),n.a.createElement($e.q,{style:{textAlign:"right",width:"20%"}},"Duration"))),n.a.createElement($e.n,null,e.tracks.map(A=>n.a.createElement(lA,{style:e.selected.includes(A.index)?l.selectedTableRow:{},key:A.index,onDoubleClick:t=>e.handleRenameDoubleClick(t,A.index),onClick:t=>e.handleSelectClick(t,A.index)},n.a.createElement($e.o,{style:{textAlign:"center",width:"2ch"}},A.index+1),n.a.createElement($e.o,{style:{width:"80%"}},n.a.createElement("div",null,A.title||"No Title")),n.a.createElement($e.o,{style:{textAlign:"right",width:"20%"}},n.a.createElement("span",null,A.encoding),"\xa0",n.a.createElement("span",null,A.duration))))))),n.a.createElement("div",{className:t.controlsContainer},"MAIN"===r?n.a.createElement(Ia,null):null)),n.a.createElement(iA,{onClick:e.open}),n.a.createElement(vt,null),n.a.createElement(ut,null),n.a.createElement(xt,null),n.a.createElement(Aa,{files:e.uploadedFiles}),n.a.createElement(yt,null),n.a.createElement(Ra,{trackIndexes:e.selected}),n.a.createElement(sA,null),n.a.createElement(St,null))},Ka=Object(Oe.a)(e=>({add:{position:"absolute",bottom:e.spacing(3),right:e.spacing(3),[y(e)]:{bottom:e.spacing(2)}},main:{overflowY:"auto",flex:"1 1 auto",marginBottom:e.spacing(3),outline:"none",marginLeft:e.spacing(-1),marginRight:e.spacing(-1),[k(e)]:{marginLeft:e.spacing(-2),marginRight:e.spacing(-2)}},toolbar:{marginTop:e.spacing(3),marginLeft:e.spacing(-2),marginRight:e.spacing(-2),[e.breakpoints.up(600+2*e.spacing(2))]:{marginLeft:e.spacing(-3),marginRight:e.spacing(-3)}},toolbarLabel:{flex:"1 1 100%"},toolbarHighlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(qA.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},headBox:{display:"flex",justifyContent:"space-between"},spacing:{marginTop:e.spacing(1)},formatBadge:{...Ta.styles(e).badge,...Ta.styles(e).colorPrimary,position:"static",display:"inline-flex",border:`2px solid ${e.palette.background.paper}`,padding:"0 4px",verticalAlign:"middle",width:e.spacing(4.5),marginRight:e.spacing(.5)},titleCell:{overflow:"hidden",maxWidth:"40ch",textOverflow:"ellipsis"},durationCell:{whiteSpace:"nowrap"},durationCellTime:{verticalAlign:"middle"},indexCell:{whiteSpace:"nowrap",paddingRight:0,width:"2ch"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},remainingTimeTooltip:{textDecoration:"underline",textDecorationStyle:"dotted"}})),Za=e=>{let A=Object(i.c)(),t=g(e=>e.main.disc),l=g(e=>e.main.deviceName);const{vintageMode:r}=g(e=>e.appState),[o,c]=n.a.useState([]),s=o.length,[d,u]=n.a.useState(null),p=Object(a.useCallback)(e=>{u(e.currentTarget)},[u]),h=Object(a.useCallback)(()=>{u(null)},[u]),b=Object(a.useCallback)(e=>{A(function(e,A){return async function(t){const{netmdService:a}=I;await a.moveTrack(e,A),Te()(t)}}(o[0],e)),h()},[A,o,h]),E=Object(a.useCallback)(()=>{A(ne.setVisible(!0))},[A]);Object(a.useEffect)(()=>{A(Te())},[A]),Object(a.useEffect)(()=>{c([])},[t]);let[f,v]=n.a.useState([]);const C=Object(a.useCallback)((e,t)=>{v(e),A(_.setVisible(!0))},[A]),{getRootProps:k,getInputProps:y,isDragActive:D,open:x}=Object(XA.a)({onDrop:C,accept:["audio/*","video/mp4"],noClick:!0}),O=Ka(),S=w(t),B=(e,A)=>{o.includes(A)?c(o.filter(e=>e!==A)):c([...o,A])},j=e=>{o.length<S.length?c(S.map(e=>e.index)):c([])},N=(e,a)=>{var n,l;let r=a,i=null!==(n=null===(l=Object(m.getTracks)(t).find(e=>e.index===r))||void 0===l?void 0:l.title)&&void 0!==n?n:"";A(Object(P.batchActions)([W.setVisible(!0),W.setCurrentName(i),W.setIndex(r)]))},R=e=>{N(0,o[0])},T=e=>{var t;A((t=o,async function(e){if(!window.confirm(`Proceed with Delete Track${1!==t.length?"s":""}? This operation cannot be undone.`))return;const{netmdService:A}=I;e(pe.setLoading(!0)),(t=t.sort()).reverse();for(let a of t)await A.deleteTrack(a);Te()(e)}))};if(r){const e={disc:t,deviceName:l,selected:o,setSelected:c,selectedCount:s,tracks:S,uploadedFiles:f,setUploadedFiles:v,onDrop:C,getRootProps:k,getInputProps:y,isDragActive:D,open:x,moveMenuAnchorEl:d,setMoveMenuAnchorEl:u,handleShowMoveMenu:p,handleCloseMoveMenu:h,handleMoveSelectedTrack:b,handleShowDumpDialog:E,handleDeleteSelected:T,handleRenameActionClick:R,handleRenameDoubleClick:N,handleSelectAllClick:j,handleSelectClick:B};return n.a.createElement(Ya,e)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ve.a,{className:O.headBox},n.a.createElement(Le.a,{component:"h1",variant:"h4"},l||"Loading..."),n.a.createElement(WA,null)),n.a.createElement(Le.a,{component:"h2",variant:"body2"},null!==t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,`${Object(m.formatTimeFromFrames)(t.left,!1)} left of ${Object(m.formatTimeFromFrames)(t.total,!1)} `),n.a.createElement(ct.a,{title:n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,`${Object(m.formatTimeFromFrames)(2*t.left,!1)} left in LP2 Mode`),n.a.createElement("br",null),n.a.createElement("span",null,`${Object(m.formatTimeFromFrames)(4*t.left,!1)} left in LP4 Mode`)),arrow:!0},n.a.createElement("span",{className:O.remainingTimeTooltip},"SP Mode"))):"Loading..."),n.a.createElement(ot.a,{className:Object(ZA.default)(O.toolbar,{[O.toolbarHighlight]:s>0})},s>0?n.a.createElement(ht.a,{indeterminate:s>0&&s<S.length,checked:s>0,onChange:j,inputProps:{"aria-label":"select all tracks"}}):null,s>0?n.a.createElement(Le.a,{className:O.toolbarLabel,color:"inherit",variant:"subtitle1"},s," selected"):n.a.createElement(Le.a,{component:"h3",variant:"h6",className:O.toolbarLabel},(null===t||void 0===t?void 0:t.title)||"Untitled Disc"),1===s?n.a.createElement(n.a.Fragment,null,n.a.createElement(ct.a,{title:"Move to Position"},n.a.createElement(We.a,{"aria-controls":"move-menu","aria-label":"Move",onClick:p},"Move")),n.a.createElement(dA.a,{id:"move-menu",anchorEl:d,open:!!d,onClose:h,PaperProps:{style:{maxHeight:300}}},Array(S.length).fill(null).map((e,A)=>n.a.createElement(uA.a,{key:`pos-${A}`,onClick:()=>b(A)},A+1)))):null,s>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(ct.a,{title:"Record from MD"},n.a.createElement(We.a,{"aria-label":"Record",onClick:E},"Record"))):null,s>0?n.a.createElement(ct.a,{title:"Delete"},n.a.createElement(mA.a,{"aria-label":"delete",onClick:T},n.a.createElement(tt.a,null))):null,s>0?n.a.createElement(ct.a,{title:"Rename"},n.a.createElement(mA.a,{"aria-label":"rename",disabled:1!==s,onClick:R},n.a.createElement(wA.a,null))):null),n.a.createElement(Ve.a,Object.assign({className:O.main},k()),n.a.createElement("input",y()),n.a.createElement(at.a,{size:"small"},n.a.createElement(rt.a,null,n.a.createElement(it.a,null,n.a.createElement(lt.a,{className:O.indexCell},"#"),n.a.createElement(lt.a,null,"Title"),n.a.createElement(lt.a,{align:"right"},"Duration"))),n.a.createElement(nt.a,null,S.map(e=>n.a.createElement(it.a,{hover:!0,selected:o.includes(e.index),key:e.index,onDoubleClick:A=>N(0,e.index),onClick:A=>B(0,e.index)},n.a.createElement(lt.a,{className:O.indexCell},e.index+1),n.a.createElement(lt.a,{className:O.titleCell,title:e.title},e.title||"No Title"),n.a.createElement(lt.a,{align:"right",className:O.durationCell},n.a.createElement("span",{className:O.formatBadge},e.encoding),n.a.createElement("span",{className:O.durationCellTime},e.duration)))))),n.a.createElement(De.a,{className:O.backdrop,open:D},"Drop your Music to Upload")),n.a.createElement($A.a,{color:"primary","aria-label":"add",className:O.add,onClick:x},n.a.createElement(et.a,null)),n.a.createElement(vt,null),n.a.createElement(ut,null),n.a.createElement(xt,null),n.a.createElement(Aa,{files:f}),n.a.createElement(yt,null),n.a.createElement(Ra,{trackIndexes:o}),n.a.createElement(sA,null),n.a.createElement(St,null))};var Xa=t(577),qa=t(311),$a=t.n(qa),_a=t(312),en=t.n(_a);const An=_e.c`
${$e.y}
body {
    font-family: 'ms_sans_serif';
}
img {
    image-rendering: pixelated;
}
`,tn=Object(Oe.a)(e=>({desktop:{width:"100%",height:"100%",backgroundColor:"teal",display:"flex",justifyContent:"center"},window:{display:"flex !important",flexDirection:"column",width:"auto",height:"100%",[k(e)]:{width:600,marginLeft:"auto",marginRight:"auto",height:600,marginTop:e.spacing(2)},[D(e)]:{width:700,height:700,marginTop:e.spacing(2)}},loading:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),an=()=>{const e=tn(),A=Object(i.c)(),{mainView:t,loading:l}=g(e=>e.appState),[r,o]=Object(a.useState)(!1),c=Object(a.useCallback)(()=>{A(pe.setMainView("WELCOME"))},[A]),s=Object(a.useCallback)(()=>{o(!1)},[o]),m=Object(a.useCallback)(()=>{o(!r)},[r,o]),d=Object(a.useCallback)(()=>{window.open("https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ","_blank")},[]),u=$a.a,p={...u,selectedTableRow:{background:u.hoverBackground,color:u.canvasTextInvert}};return n.a.createElement("div",{className:e.desktop},n.a.createElement(An,null),n.a.createElement(_e.b,{theme:p},n.a.createElement($e.v,{className:e.window},n.a.createElement($e.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("img",{alt:"CD Player",src:en.a}),n.a.createElement("span",{style:{flex:"1 1 auto",marginLeft:"4px"}},"Web MiniDisc"),"MAIN"===t?n.a.createElement($e.c,{onClick:c},n.a.createElement(rA,null)):null),n.a.createElement($e.t,null,n.a.createElement($e.c,{variant:"menu",size:"sm",active:r,onClick:m},"File"),n.a.createElement($e.c,{variant:"menu",size:"sm",onClick:d},"Help"),r?n.a.createElement(WA,{onClick:s}):null),n.a.createElement(n.a.Fragment,null,"WELCOME"===t?n.a.createElement(KA,null):null,"MAIN"===t?n.a.createElement(Za,null):null),n.a.createElement($e.j,{variant:"well"},"\xa0"," (c) ",n.a.createElement($e.a,{rel:"noopener noreferrer",color:"inherit",target:"_blank",href:"https://stefano.brilli.me/"},"Stefano Brilli")," ",(new Date).getFullYear(),"."),l?n.a.createElement("div",{className:e.loading},n.a.createElement($e.g,{size:32})):null)))},nn=Object(Oe.a)(e=>({layout:{width:"auto",height:"100%",[k(e)]:{width:600,marginLeft:"auto",marginRight:"auto"},[D(e)]:{width:700}},paper:{position:"relative",display:"flex",flexDirection:"column",padding:e.spacing(2),height:"calc(100% - 20px)",[k(e)]:{marginTop:e.spacing(2),marginBottom:e.spacing(1),padding:e.spacing(3),height:600},[D(e)]:{height:700}},bottomBar:{display:"flex",alignItems:"center",[y(e)]:{flexWrap:"wrap"},marginLeft:-e.spacing(2)},copyrightTypography:{textAlign:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},minidiscLogo:{width:48},controlsContainer:{flex:"0 0 auto",width:"100%",paddingRight:e.spacing(8),[y(e)]:{paddingLeft:0}}})),ln=Object(Se.a)({palette:{type:"dark",primary:{light:"#6ec6ff",main:"#2196f3",dark:"#0069c0",contrastText:"#fff"}}}),rn=Object(Se.a)({palette:{type:"light"}});var on=()=>{const e=nn(),{mainView:A,loading:t,darkMode:a,vintageMode:l}=g(e=>e.appState);return l?n.a.createElement(an,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(Be.a,{theme:a?ln:rn},n.a.createElement(ye.a,null),n.a.createElement("main",{className:e.layout},n.a.createElement(Xa.a,{className:e.paper},"WELCOME"===A?n.a.createElement(KA,null):null,"MAIN"===A?n.a.createElement(Za,null):null,n.a.createElement(Ve.a,{className:e.controlsContainer},"MAIN"===A?n.a.createElement(Ia,null):null)),n.a.createElement(Le.a,{variant:"body2",color:"textSecondary",className:e.copyrightTypography},"\xa9 ",n.a.createElement(He.a,{rel:"noopener noreferrer",color:"inherit",target:"_blank",href:"https://stefano.brilli.me/"},"Stefano Brilli")," ",(new Date).getFullYear(),".")),n.a.createElement(De.a,{className:e.backdrop,open:t},n.a.createElement(xe.a,{color:"inherit"}))))},cn=(t(559),t(560),t(197));class sn{constructor(e){this.worker=e,this.messageCallback=void 0,e.onmessage=this.handleMessage.bind(this)}async init(){await new Promise(e=>{this.messageCallback=e,this.worker.postMessage({action:"init"})})}async encode(e,A){return(await new Promise(t=>{this.messageCallback=t,this.worker.postMessage({action:"encode",bitrate:A,data:e},[e])})).data.result}terminate(){this.worker.terminate()}handleMessage(e){this.messageCallback(e),this.messageCallback=void 0}}if("undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let e;onmessage=async A=>{const{action:t,...a}=A.data;if("init"===t)self.importScripts(h("atracdenc.js")),self.Module().then(A=>{e=A,self.postMessage({action:"init"}),e.setLogger&&e.setLogger((e,A)=>console.log(`${A}: ${e}`))});else if("encode"===t){const{bitrate:A,data:t}=a,n="inWavFile.wav",l="outAt3File.aea",r=new Uint8Array(t);e.FS.writeFile(`${n}`,r),e.callMain(["-e","atrac3","-i",n,"-o",l,"--bitrate",A]);let i=e.FS.stat(l).size,o=new Uint8Array(i-96),c=e.FS.open(l,"r");e.FS.read(c,o,0,o.length,96),e.FS.close(c);let s=o.buffer;self.postMessage({action:"encode",result:s},[s])}}}const mn=t(575);var dn=t(313),un=t.n(dn);I.netmdService=new B({debug:!0}),I.audioExportService=new class{constructor(){this.ffmpegProcess=void 0,this.atracdencProcess=void 0,this.loglines=[],this.inFileName="",this.outFileNameNoExt=""}async init(){Object(cn.setLogging)(!0)}async prepare(e){this.loglines=[],this.ffmpegProcess=Object(cn.createWorker)({logger:e=>{this.loglines.push(e),console.log(e.action,e.message)},corePath:h("ffmpeg-core.js"),workerPath:h("worker.min.js")}),await this.ffmpegProcess.load(),this.atracdencProcess=new sn(new mn),await this.atracdencProcess.init();let A=e.name.split(".").slice(-1);if(0===A.length)throw new Error(`Unrecognized file format: ${e.name}`);this.inFileName=`inAudioFile.${A[0]}`,this.outFileNameNoExt="outAudioFile",await this.ffmpegProcess.write(this.inFileName,e)}async info(){await this.ffmpegProcess.transcode(this.inFileName,`${this.outFileNameNoExt}.metadata`,"-f ffmetadata");let e=/Audio:\s(.*?),/,A=/Input #0,\s(.*?),/,t=null,a=null;for(let n of this.loglines){let l=n.message.match(e);if(null===l)if(l=n.message.match(A),null===l){if(null!==t&&null!==a)break}else a=l[1];else t=l[1]}return{format:t,input:a}}async export({format:e}){let A;if("SP"===e){const e=`${this.outFileNameNoExt}.raw`;await this.ffmpegProcess.transcode(this.inFileName,e,"-ac 2 -ar 44100 -f s16be");let{data:t}=await this.ffmpegProcess.read(e);A=t.buffer}else{const t=`${this.outFileNameNoExt}.wav`;await this.ffmpegProcess.transcode(this.inFileName,t,"-f wav -ar 44100 -ac 2");let{data:a}=await this.ffmpegProcess.read(t),n="0";switch(e){case"LP2":n="128";break;case"LP105":n="102";break;case"LP4":n="64"}A=await this.atracdencProcess.encode(a.buffer,n)}return this.ffmpegProcess.worker.terminate(),this.atracdencProcess.terminate(),A}},I.mediaRecorderService=new class{constructor(){this.recorder=void 0,this.stream=void 0,this.audioContext=void 0,this.analyserNode=void 0,this.gainNode=void 0}playTestInput(e){this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.analyserNode=this.audioContext.createAnalyser(),this.initStream(e).then(()=>{this.audioContext.createMediaStreamSource(this.stream).connect(this.gainNode),this.gainNode.connect(this.analyserNode),this.analyserNode.connect(this.audioContext.destination)})}stopTestInput(){var e;this.audioContext&&(null===(e=this.audioContext)||void 0===e||e.close(),delete this.audioContext,this.closeStream())}async initStream(e){const A={autoGainControl:!1,channelCount:2,deviceId:e,echoCancellation:!1,noiseSuppression:!1,sampleRate:44100,highpassFilter:!1};this.stream=await navigator.mediaDevices.getUserMedia({audio:A});const t=this.stream.getAudioTracks();t.length>0&&console.log("Record Setings:",t[0].getSettings())}async startRecording(){this.audioContext=new AudioContext;const e=this.audioContext.createMediaStreamSource(this.stream);this.recorder=new un.a(e,{workerPath:h("recorderWorker.js")}),this.recorder.record()}async stopRecording(){this.recorder.stop()}async closeStream(){var e;null===(e=this.stream)||void 0===e||e.getTracks().forEach(e=>e.stop())}downloadRecorded(e){this.recorder.exportWAV(A=>{let t=URL.createObjectURL(A),a=document.createElement("a");document.body.appendChild(a),a.style.display="none",a.href=t,a.download=`${f(e)}.wav`,a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a)})}},function(){let e;window.addEventListener("beforeunload",e=>{Ce.getState().uploadDialog.visible&&(e.preventDefault(),e.returnValue="Warning! Recording will be interrupted")}),navigator&&navigator.usb?navigator.usb.ondisconnect=function(){Ce.dispatch(pe.setMainView("WELCOME"))}:Ce.dispatch(pe.setBrowserSupported(!1)),"Notification"in window&&"denied"!==Notification.permission||(Ce.dispatch(pe.setNotificationSupport(!1)),Ce.dispatch(pe.setNotifyWhenFinished(!1))),window.addEventListener("beforeinstallprompt",A=>{A.preventDefault(),e=A})}(),function(){let e=null,A=!1;function t(e){var t;return!A&&"MAIN"===e.appState.mainView&&!1===e.appState.loading&&"playing"===(null===(t=e.main.deviceStatus)||void 0===t?void 0:t.state)&&!1===e.convertDialog.visible&&!1===e.uploadDialog.visible&&!1===e.recordDialog.visible&&!1===e.panicDialog.visible&&!1===e.errorDialog.visible&&!1===e.dumpDialog.visible}Ce.subscribe((function(){const a=Ce.getState();!0===t(a)&&null===e?e=setInterval(async()=>{try{const e=await I.netmdService.getDeviceStatus();Ce.dispatch(Ee.setDeviceStatus(e))}catch(e){console.error(e),A=!0}},5e3):!1===t(a)&&null!==e&&(clearInterval(e),e=null)}))}(),r.a.render(n.a.createElement(i.a,{store:Ce},n.a.createElement(on,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/webminidisc",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const A="/webminidisc/final-service-worker.js";o?(!function(e,A){fetch(e,{headers:{"Service-Worker":"script"}}).then(t=>{const a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):c(e,A)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(A,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):c(A,e)})}}()}},[[335,1,2]]]);
//# sourceMappingURL=main.d8bb94e1.chunk.js.map